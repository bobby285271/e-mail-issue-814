/* AttachmentBar.c generated by valac 0.56.3, the Vala compiler
 * generated from AttachmentBar.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/*-
 * Copyright (c) 2017 elementary LLC. (https://elementary.io)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Authored by: Corentin NoÃ«l <corentin@elementary.io>
 */

#include <gtk/gtk.h>
#include <glib-object.h>
#include <gio/gio.h>
#include <glib.h>
#include <camel/camel.h>
#include <stdlib.h>
#include <string.h>
#include <granite.h>

#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define MAIL_TYPE_ATTACHMENT_BAR (mail_attachment_bar_get_type ())
#define MAIL_ATTACHMENT_BAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_ATTACHMENT_BAR, MailAttachmentBar))
#define MAIL_ATTACHMENT_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_ATTACHMENT_BAR, MailAttachmentBarClass))
#define MAIL_IS_ATTACHMENT_BAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_ATTACHMENT_BAR))
#define MAIL_IS_ATTACHMENT_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_ATTACHMENT_BAR))
#define MAIL_ATTACHMENT_BAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_ATTACHMENT_BAR, MailAttachmentBarClass))

typedef struct _MailAttachmentBar MailAttachmentBar;
typedef struct _MailAttachmentBarClass MailAttachmentBarClass;
typedef struct _MailAttachmentBarPrivate MailAttachmentBarPrivate;
enum  {
	MAIL_ATTACHMENT_BAR_0_PROPERTY,
	MAIL_ATTACHMENT_BAR_LOADING_CANCELLABLE_PROPERTY,
	MAIL_ATTACHMENT_BAR_NUM_PROPERTIES
};
static GParamSpec* mail_attachment_bar_properties[MAIL_ATTACHMENT_BAR_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define TYPE_ATTACHMENT_BUTTON (attachment_button_get_type ())
#define ATTACHMENT_BUTTON(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ATTACHMENT_BUTTON, AttachmentButton))
#define ATTACHMENT_BUTTON_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ATTACHMENT_BUTTON, AttachmentButtonClass))
#define IS_ATTACHMENT_BUTTON(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ATTACHMENT_BUTTON))
#define IS_ATTACHMENT_BUTTON_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ATTACHMENT_BUTTON))
#define ATTACHMENT_BUTTON_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ATTACHMENT_BUTTON, AttachmentButtonClass))

typedef struct _AttachmentButton AttachmentButton;
typedef struct _AttachmentButtonClass AttachmentButtonClass;
typedef struct _Block28Data Block28Data;
#define _camel_content_type_unref0(var) ((var == NULL) ? NULL : (var = (camel_content_type_unref (var), NULL)))
typedef struct _MailAttachmentBarParseMimeContentData MailAttachmentBarParseMimeContentData;

#define MAIL_TYPE_OPEN_ATTACHMENT_DIALOG (mail_open_attachment_dialog_get_type ())
#define MAIL_OPEN_ATTACHMENT_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_OPEN_ATTACHMENT_DIALOG, MailOpenAttachmentDialog))
#define MAIL_OPEN_ATTACHMENT_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_OPEN_ATTACHMENT_DIALOG, MailOpenAttachmentDialogClass))
#define MAIL_IS_OPEN_ATTACHMENT_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_OPEN_ATTACHMENT_DIALOG))
#define MAIL_IS_OPEN_ATTACHMENT_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_OPEN_ATTACHMENT_DIALOG))
#define MAIL_OPEN_ATTACHMENT_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_OPEN_ATTACHMENT_DIALOG, MailOpenAttachmentDialogClass))

typedef struct _MailOpenAttachmentDialog MailOpenAttachmentDialog;
typedef struct _MailOpenAttachmentDialogClass MailOpenAttachmentDialogClass;

struct _MailAttachmentBar {
	GtkFlowBox parent_instance;
	MailAttachmentBarPrivate * priv;
};

struct _MailAttachmentBarClass {
	GtkFlowBoxClass parent_class;
};

struct _MailAttachmentBarPrivate {
	GCancellable* _loading_cancellable;
};

struct _Block28Data {
	int _ref_count_;
	MailAttachmentBar* self;
	AttachmentButton* button;
};

struct _MailAttachmentBarParseMimeContentData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	MailAttachmentBar* self;
	CamelDataWrapper* message_content;
	CamelMultipart* content;
	CamelMultipart* _tmp0_;
	guint i;
	gboolean _tmp1_;
	guint _tmp2_;
	CamelMultipart* _tmp3_;
	CamelMimePart* part;
	CamelMultipart* _tmp4_;
	CamelMimePart* _tmp5_;
	CamelMimePart* _tmp6_;
	CamelContentType* field;
	CamelMimePart* _tmp7_;
	CamelContentType* _tmp8_;
	CamelContentType* _tmp9_;
	CamelMimePart* _tmp10_;
	const gchar* _tmp11_;
	const gchar* _tmp12_;
	Block28Data* _data28_;
	CamelMimePart* _tmp13_;
	GCancellable* _tmp14_;
	AttachmentButton* _tmp15_;
	AttachmentButton* _tmp16_;
	AttachmentButton* _tmp17_;
	CamelContentType* _tmp18_;
	const gchar* _tmp19_;
	CamelMimePart* _tmp20_;
	CamelDataWrapper* _tmp21_;
	CamelDataWrapper* _tmp22_;
};

static gint MailAttachmentBar_private_offset;
static gpointer mail_attachment_bar_parent_class = NULL;

VALA_EXTERN GType mail_attachment_bar_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailAttachmentBar, g_object_unref)
VALA_EXTERN MailAttachmentBar* mail_attachment_bar_new (GCancellable* loading_cancellable);
VALA_EXTERN MailAttachmentBar* mail_attachment_bar_construct (GType object_type,
                                                  GCancellable* loading_cancellable);
static void mail_attachment_bar_parse_mime_content_data_free (gpointer _data);
VALA_EXTERN void mail_attachment_bar_parse_mime_content (MailAttachmentBar* self,
                                             CamelDataWrapper* message_content,
                                             GAsyncReadyCallback _callback_,
                                             gpointer _user_data_);
VALA_EXTERN void mail_attachment_bar_parse_mime_content_finish (MailAttachmentBar* self,
                                                    GAsyncResult* _res_);
static gboolean mail_attachment_bar_parse_mime_content_co (MailAttachmentBarParseMimeContentData* _data_);
VALA_EXTERN GType attachment_button_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (AttachmentButton, g_object_unref)
static Block28Data* block28_data_ref (Block28Data* _data28_);
static void block28_data_unref (void * _userdata_);
VALA_EXTERN GCancellable* mail_attachment_bar_get_loading_cancellable (MailAttachmentBar* self);
VALA_EXTERN AttachmentButton* attachment_button_new (CamelMimePart* mime_part,
                                         GCancellable* loading_cancellable);
VALA_EXTERN AttachmentButton* attachment_button_construct (GType object_type,
                                               CamelMimePart* mime_part,
                                               GCancellable* loading_cancellable);
static void _______lambda49_ (Block28Data* _data28_);
static void mail_attachment_bar_show_attachment (MailAttachmentBar* self,
                                          CamelMimePart* attachment_part);
VALA_EXTERN CamelMimePart* attachment_button_get_mime_part (AttachmentButton* self);
static void ________lambda49__gtk_flow_box_child_activate (GtkFlowBoxChild* _sender,
                                                    gpointer self);
static void mail_attachment_bar_parse_mime_content_ready (GObject* source_object,
                                                   GAsyncResult* _res_,
                                                   gpointer _user_data_);
VALA_EXTERN GType mail_open_attachment_dialog_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailOpenAttachmentDialog, g_object_unref)
VALA_EXTERN MailOpenAttachmentDialog* mail_open_attachment_dialog_new (GtkWindow* parent,
                                                           CamelMimePart* mime_part);
VALA_EXTERN MailOpenAttachmentDialog* mail_open_attachment_dialog_construct (GType object_type,
                                                                 GtkWindow* parent,
                                                                 CamelMimePart* mime_part);
static void mail_attachment_bar_set_loading_cancellable (MailAttachmentBar* self,
                                                  GCancellable* value);
static GObject * mail_attachment_bar_constructor (GType type,
                                           guint n_construct_properties,
                                           GObjectConstructParam * construct_properties);
static void mail_attachment_bar_finalize (GObject * obj);
static GType mail_attachment_bar_get_type_once (void);
static void _vala_mail_attachment_bar_get_property (GObject * object,
                                             guint property_id,
                                             GValue * value,
                                             GParamSpec * pspec);
static void _vala_mail_attachment_bar_set_property (GObject * object,
                                             guint property_id,
                                             const GValue * value,
                                             GParamSpec * pspec);

static inline gpointer
mail_attachment_bar_get_instance_private (MailAttachmentBar* self)
{
	return G_STRUCT_MEMBER_P (self, MailAttachmentBar_private_offset);
}

MailAttachmentBar*
mail_attachment_bar_construct (GType object_type,
                               GCancellable* loading_cancellable)
{
	MailAttachmentBar * self = NULL;
	g_return_val_if_fail (loading_cancellable != NULL, NULL);
	self = (MailAttachmentBar*) g_object_new (object_type, "loading-cancellable", loading_cancellable, NULL);
	return self;
}

MailAttachmentBar*
mail_attachment_bar_new (GCancellable* loading_cancellable)
{
	return mail_attachment_bar_construct (MAIL_TYPE_ATTACHMENT_BAR, loading_cancellable);
}

static void
mail_attachment_bar_parse_mime_content_data_free (gpointer _data)
{
	MailAttachmentBarParseMimeContentData* _data_;
	_data_ = _data;
	_g_object_unref0 (_data_->message_content);
	_g_object_unref0 (_data_->self);
	g_slice_free (MailAttachmentBarParseMimeContentData, _data_);
}

static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}

void
mail_attachment_bar_parse_mime_content (MailAttachmentBar* self,
                                        CamelDataWrapper* message_content,
                                        GAsyncReadyCallback _callback_,
                                        gpointer _user_data_)
{
	MailAttachmentBarParseMimeContentData* _data_;
	MailAttachmentBar* _tmp0_;
	CamelDataWrapper* _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (message_content != NULL);
	_data_ = g_slice_new0 (MailAttachmentBarParseMimeContentData);
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
	g_task_set_task_data (_data_->_async_result, _data_, mail_attachment_bar_parse_mime_content_data_free);
	_tmp0_ = _g_object_ref0 (self);
	_data_->self = _tmp0_;
	_tmp1_ = _g_object_ref0 (message_content);
	_g_object_unref0 (_data_->message_content);
	_data_->message_content = _tmp1_;
	mail_attachment_bar_parse_mime_content_co (_data_);
}

void
mail_attachment_bar_parse_mime_content_finish (MailAttachmentBar* self,
                                               GAsyncResult* _res_)
{
	MailAttachmentBarParseMimeContentData* _data_;
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
}

static gpointer
_camel_content_type_ref0 (gpointer self)
{
	return self ? camel_content_type_ref (self) : NULL;
}

static Block28Data*
block28_data_ref (Block28Data* _data28_)
{
	g_atomic_int_inc (&_data28_->_ref_count_);
	return _data28_;
}

static void
block28_data_unref (void * _userdata_)
{
	Block28Data* _data28_;
	_data28_ = (Block28Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data28_->_ref_count_)) {
		MailAttachmentBar* self;
		self = _data28_->self;
		_g_object_unref0 (_data28_->button);
		_g_object_unref0 (self);
		g_slice_free (Block28Data, _data28_);
	}
}

static void
_______lambda49_ (Block28Data* _data28_)
{
	MailAttachmentBar* self;
	AttachmentButton* _tmp0_;
	CamelMimePart* _tmp1_;
	CamelMimePart* _tmp2_;
	self = _data28_->self;
	_tmp0_ = _data28_->button;
	_tmp1_ = attachment_button_get_mime_part (_tmp0_);
	_tmp2_ = _tmp1_;
	mail_attachment_bar_show_attachment (self, _tmp2_);
}

static void
________lambda49__gtk_flow_box_child_activate (GtkFlowBoxChild* _sender,
                                               gpointer self)
{
	_______lambda49_ (self);
}

static void
mail_attachment_bar_parse_mime_content_ready (GObject* source_object,
                                              GAsyncResult* _res_,
                                              gpointer _user_data_)
{
	MailAttachmentBarParseMimeContentData* _data_;
	_data_ = _user_data_;
	_data_->_source_object_ = source_object;
	_data_->_res_ = _res_;
	mail_attachment_bar_parse_mime_content_co (_data_);
}

static gboolean
mail_attachment_bar_parse_mime_content_co (MailAttachmentBarParseMimeContentData* _data_)
{
	switch (_data_->_state_) {
		case 0:
		goto _state_0;
		case 1:
		goto _state_1;
		default:
		g_assert_not_reached ();
	}
	_state_0:
	if (G_TYPE_CHECK_INSTANCE_TYPE (_data_->message_content, camel_multipart_get_type ())) {
		_data_->_tmp0_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_data_->message_content, camel_multipart_get_type ()) ? ((CamelMultipart*) _data_->message_content) : NULL);
		_data_->content = _data_->_tmp0_;
		{
			_data_->i = (guint) 0;
			{
				_data_->_tmp1_ = TRUE;
				while (TRUE) {
					if (!_data_->_tmp1_) {
						_data_->_tmp2_ = _data_->i;
						_data_->i = _data_->_tmp2_ + 1;
					}
					_data_->_tmp1_ = FALSE;
					_data_->_tmp3_ = _data_->content;
					if (!(_data_->i < camel_multipart_get_number (_data_->_tmp3_))) {
						break;
					}
					_data_->_tmp4_ = _data_->content;
					_data_->_tmp5_ = camel_multipart_get_part (_data_->_tmp4_, _data_->i);
					_data_->_tmp6_ = _g_object_ref0 (_data_->_tmp5_);
					_data_->part = _data_->_tmp6_;
					_data_->_tmp7_ = _data_->part;
					_data_->_tmp8_ = camel_data_wrapper_get_mime_type_field ((CamelDataWrapper*) _data_->_tmp7_);
					_data_->_tmp9_ = _camel_content_type_ref0 (_data_->_tmp8_);
					_data_->field = _data_->_tmp9_;
					_data_->_tmp10_ = _data_->part;
					_data_->_tmp11_ = camel_mime_part_get_disposition (_data_->_tmp10_);
					_data_->_tmp12_ = _data_->_tmp11_;
					if (g_strcmp0 (_data_->_tmp12_, "attachment") == 0) {
						_data_->_data28_ = g_slice_new0 (Block28Data);
						_data_->_data28_->_ref_count_ = 1;
						_data_->_data28_->self = g_object_ref (_data_->self);
						_data_->_tmp13_ = _data_->part;
						_data_->_tmp14_ = _data_->self->priv->_loading_cancellable;
						_data_->_tmp15_ = attachment_button_new (_data_->_tmp13_, _data_->_tmp14_);
						g_object_ref_sink (_data_->_tmp15_);
						_data_->_data28_->button = _data_->_tmp15_;
						_data_->_tmp16_ = _data_->_data28_->button;
						g_signal_connect_data ((GtkFlowBoxChild*) _data_->_tmp16_, "activate", (GCallback) ________lambda49__gtk_flow_box_child_activate, block28_data_ref (_data_->_data28_), (GClosureNotify) block28_data_unref, 0);
						_data_->_tmp17_ = _data_->_data28_->button;
						gtk_container_add ((GtkContainer*) _data_->self, (GtkWidget*) _data_->_tmp17_);
						block28_data_unref (_data_->_data28_);
						_data_->_data28_ = NULL;
					} else {
						_data_->_tmp18_ = _data_->field;
						_data_->_tmp19_ = _data_->_tmp18_->type;
						if (g_strcmp0 (_data_->_tmp19_, "multipart") == 0) {
							_data_->_tmp20_ = _data_->part;
							_data_->_tmp21_ = camel_medium_get_content ((CamelMedium*) _data_->_tmp20_);
							_data_->_tmp22_ = _data_->_tmp21_;
							_data_->_state_ = 1;
							mail_attachment_bar_parse_mime_content (_data_->self, _data_->_tmp22_, mail_attachment_bar_parse_mime_content_ready, _data_);
							return FALSE;
							_state_1:
							mail_attachment_bar_parse_mime_content_finish (_data_->self, _data_->_res_);
						}
					}
					_camel_content_type_unref0 (_data_->field);
					_g_object_unref0 (_data_->part);
				}
			}
		}
		_g_object_unref0 (_data_->content);
	}
	gtk_widget_show_all ((GtkWidget*) _data_->self);
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
	if (_data_->_state_ != 0) {
		while (!g_task_get_completed (_data_->_async_result)) {
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
		}
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
}

static void
mail_attachment_bar_show_attachment (MailAttachmentBar* self,
                                     CamelMimePart* attachment_part)
{
	MailOpenAttachmentDialog* dialog = NULL;
	GtkWidget* _tmp0_;
	MailOpenAttachmentDialog* _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (attachment_part != NULL);
	_tmp0_ = gtk_widget_get_toplevel ((GtkWidget*) self);
	_tmp1_ = mail_open_attachment_dialog_new (G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, gtk_window_get_type ()) ? ((GtkWindow*) _tmp0_) : NULL, attachment_part);
	g_object_ref_sink (_tmp1_);
	dialog = _tmp1_;
	gtk_widget_show_all ((GtkWidget*) dialog);
	gtk_dialog_run ((GtkDialog*) dialog);
	gtk_widget_destroy ((GtkWidget*) dialog);
	_g_object_unref0 (dialog);
}

GCancellable*
mail_attachment_bar_get_loading_cancellable (MailAttachmentBar* self)
{
	GCancellable* result;
	GCancellable* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_loading_cancellable;
	result = _tmp0_;
	return result;
}

static void
mail_attachment_bar_set_loading_cancellable (MailAttachmentBar* self,
                                             GCancellable* value)
{
	GCancellable* old_value;
	g_return_if_fail (self != NULL);
	old_value = mail_attachment_bar_get_loading_cancellable (self);
	if (old_value != value) {
		self->priv->_loading_cancellable = value;
		g_object_notify_by_pspec ((GObject *) self, mail_attachment_bar_properties[MAIL_ATTACHMENT_BAR_LOADING_CANCELLABLE_PROPERTY]);
	}
}

static GObject *
mail_attachment_bar_constructor (GType type,
                                 guint n_construct_properties,
                                 GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	MailAttachmentBar * self;
	GtkStyleContext* style_context = NULL;
	GtkStyleContext* _tmp0_;
	GtkStyleContext* _tmp1_;
	GtkStyleContext* _tmp2_;
	GtkStyleContext* _tmp3_;
	parent_class = G_OBJECT_CLASS (mail_attachment_bar_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MAIL_TYPE_ATTACHMENT_BAR, MailAttachmentBar);
	gtk_widget_set_hexpand ((GtkWidget*) self, TRUE);
	gtk_flow_box_set_activate_on_single_click ((GtkFlowBox*) self, TRUE);
	_tmp0_ = gtk_widget_get_style_context ((GtkWidget*) self);
	_tmp1_ = _g_object_ref0 (_tmp0_);
	style_context = _tmp1_;
	_tmp2_ = style_context;
	gtk_style_context_add_class (_tmp2_, GTK_STYLE_CLASS_TOOLBAR);
	_tmp3_ = style_context;
	gtk_style_context_add_class (_tmp3_, GTK_STYLE_CLASS_INLINE_TOOLBAR);
	_g_object_unref0 (style_context);
	return obj;
}

static void
mail_attachment_bar_class_init (MailAttachmentBarClass * klass,
                                gpointer klass_data)
{
	mail_attachment_bar_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &MailAttachmentBar_private_offset);
	G_OBJECT_CLASS (klass)->get_property = _vala_mail_attachment_bar_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_mail_attachment_bar_set_property;
	G_OBJECT_CLASS (klass)->constructor = mail_attachment_bar_constructor;
	G_OBJECT_CLASS (klass)->finalize = mail_attachment_bar_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), MAIL_ATTACHMENT_BAR_LOADING_CANCELLABLE_PROPERTY, mail_attachment_bar_properties[MAIL_ATTACHMENT_BAR_LOADING_CANCELLABLE_PROPERTY] = g_param_spec_object ("loading-cancellable", "loading-cancellable", "loading-cancellable", g_cancellable_get_type (), G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
}

static void
mail_attachment_bar_instance_init (MailAttachmentBar * self,
                                   gpointer klass)
{
	self->priv = mail_attachment_bar_get_instance_private (self);
}

static void
mail_attachment_bar_finalize (GObject * obj)
{
	MailAttachmentBar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MAIL_TYPE_ATTACHMENT_BAR, MailAttachmentBar);
	G_OBJECT_CLASS (mail_attachment_bar_parent_class)->finalize (obj);
}

static GType
mail_attachment_bar_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (MailAttachmentBarClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) mail_attachment_bar_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MailAttachmentBar), 0, (GInstanceInitFunc) mail_attachment_bar_instance_init, NULL };
	GType mail_attachment_bar_type_id;
	mail_attachment_bar_type_id = g_type_register_static (gtk_flow_box_get_type (), "MailAttachmentBar", &g_define_type_info, 0);
	MailAttachmentBar_private_offset = g_type_add_instance_private (mail_attachment_bar_type_id, sizeof (MailAttachmentBarPrivate));
	return mail_attachment_bar_type_id;
}

GType
mail_attachment_bar_get_type (void)
{
	static volatile gsize mail_attachment_bar_type_id__once = 0;
	if (g_once_init_enter (&mail_attachment_bar_type_id__once)) {
		GType mail_attachment_bar_type_id;
		mail_attachment_bar_type_id = mail_attachment_bar_get_type_once ();
		g_once_init_leave (&mail_attachment_bar_type_id__once, mail_attachment_bar_type_id);
	}
	return mail_attachment_bar_type_id__once;
}

static void
_vala_mail_attachment_bar_get_property (GObject * object,
                                        guint property_id,
                                        GValue * value,
                                        GParamSpec * pspec)
{
	MailAttachmentBar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MAIL_TYPE_ATTACHMENT_BAR, MailAttachmentBar);
	switch (property_id) {
		case MAIL_ATTACHMENT_BAR_LOADING_CANCELLABLE_PROPERTY:
		g_value_set_object (value, mail_attachment_bar_get_loading_cancellable (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}

static void
_vala_mail_attachment_bar_set_property (GObject * object,
                                        guint property_id,
                                        const GValue * value,
                                        GParamSpec * pspec)
{
	MailAttachmentBar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MAIL_TYPE_ATTACHMENT_BAR, MailAttachmentBar);
	switch (property_id) {
		case MAIL_ATTACHMENT_BAR_LOADING_CANCELLABLE_PROPERTY:
		mail_attachment_bar_set_loading_cancellable (self, g_value_get_object (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}

