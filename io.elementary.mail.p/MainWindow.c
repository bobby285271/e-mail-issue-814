/* MainWindow.c generated by valac 0.56.3, the Vala compiler
 * generated from MainWindow.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/*-
 * Copyright (c) 2017 elementary LLC. (https://elementary.io)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Authored by: Corentin NoÃ«l <corentin@elementary.io>
 */

#include <handy.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <granite.h>
#include <glib.h>
#include <gdk/gdk.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <gee.h>
#include <glib/gi18n-lib.h>
#include <cairo-gobject.h>
#include <camel/camel.h>
#include <float.h>
#include <math.h>

#define MAIL_MAIN_WINDOW_ACTION_GROUP_PREFIX "win"
#define MAIL_MAIN_WINDOW_ACTION_PREFIX MAIL_MAIN_WINDOW_ACTION_GROUP_PREFIX "."
#define MAIL_MAIN_WINDOW_ACTION_COMPOSE_MESSAGE "compose_message"
#define MAIL_MAIN_WINDOW_ACTION_REFRESH "refresh"
#define MAIL_MAIN_WINDOW_ACTION_REPLY "reply"
#define MAIL_MAIN_WINDOW_ACTION_REPLY_ALL "reply-all"
#define MAIL_MAIN_WINDOW_ACTION_FORWARD "forward"
#define MAIL_MAIN_WINDOW_ACTION_MARK_READ "mark-read"
#define MAIL_MAIN_WINDOW_ACTION_MARK_STAR "mark-star"
#define MAIL_MAIN_WINDOW_ACTION_MARK_UNREAD "mark-unread"
#define MAIL_MAIN_WINDOW_ACTION_MARK_UNSTAR "mark-unstar"
#define MAIL_MAIN_WINDOW_ACTION_ARCHIVE "archive"
#define MAIL_MAIN_WINDOW_ACTION_MOVE_TO_TRASH "trash"
#define MAIL_MAIN_WINDOW_ACTION_FULLSCREEN "full-screen"
#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define MAIL_TYPE_MAIN_WINDOW (mail_main_window_get_type ())
#define MAIL_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_MAIN_WINDOW, MailMainWindow))
#define MAIL_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_MAIN_WINDOW, MailMainWindowClass))
#define MAIL_IS_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_MAIN_WINDOW))
#define MAIL_IS_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_MAIN_WINDOW))
#define MAIL_MAIN_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_MAIN_WINDOW, MailMainWindowClass))

typedef struct _MailMainWindow MailMainWindow;
typedef struct _MailMainWindowClass MailMainWindowClass;
typedef struct _MailMainWindowPrivate MailMainWindowPrivate;

#define MAIL_TYPE_HEADER_BAR (mail_header_bar_get_type ())
#define MAIL_HEADER_BAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_HEADER_BAR, MailHeaderBar))
#define MAIL_HEADER_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_HEADER_BAR, MailHeaderBarClass))
#define MAIL_IS_HEADER_BAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_HEADER_BAR))
#define MAIL_IS_HEADER_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_HEADER_BAR))
#define MAIL_HEADER_BAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_HEADER_BAR, MailHeaderBarClass))

typedef struct _MailHeaderBar MailHeaderBar;
typedef struct _MailHeaderBarClass MailHeaderBarClass;

#define MAIL_TYPE_FOLDERS_LIST_VIEW (mail_folders_list_view_get_type ())
#define MAIL_FOLDERS_LIST_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListView))
#define MAIL_FOLDERS_LIST_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListViewClass))
#define MAIL_IS_FOLDERS_LIST_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_FOLDERS_LIST_VIEW))
#define MAIL_IS_FOLDERS_LIST_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_FOLDERS_LIST_VIEW))
#define MAIL_FOLDERS_LIST_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListViewClass))

typedef struct _MailFoldersListView MailFoldersListView;
typedef struct _MailFoldersListViewClass MailFoldersListViewClass;

#define TYPE_VIRTUALIZING_LIST_BOX (virtualizing_list_box_get_type ())
#define VIRTUALIZING_LIST_BOX(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_VIRTUALIZING_LIST_BOX, VirtualizingListBox))
#define VIRTUALIZING_LIST_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_VIRTUALIZING_LIST_BOX, VirtualizingListBoxClass))
#define IS_VIRTUALIZING_LIST_BOX(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_VIRTUALIZING_LIST_BOX))
#define IS_VIRTUALIZING_LIST_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_VIRTUALIZING_LIST_BOX))
#define VIRTUALIZING_LIST_BOX_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_VIRTUALIZING_LIST_BOX, VirtualizingListBoxClass))

typedef struct _VirtualizingListBox VirtualizingListBox;
typedef struct _VirtualizingListBoxClass VirtualizingListBoxClass;

#define MAIL_TYPE_CONVERSATION_LIST_BOX (mail_conversation_list_box_get_type ())
#define MAIL_CONVERSATION_LIST_BOX(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_CONVERSATION_LIST_BOX, MailConversationListBox))
#define MAIL_CONVERSATION_LIST_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_CONVERSATION_LIST_BOX, MailConversationListBoxClass))
#define MAIL_IS_CONVERSATION_LIST_BOX(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_CONVERSATION_LIST_BOX))
#define MAIL_IS_CONVERSATION_LIST_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_CONVERSATION_LIST_BOX))
#define MAIL_CONVERSATION_LIST_BOX_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_CONVERSATION_LIST_BOX, MailConversationListBoxClass))

typedef struct _MailConversationListBox MailConversationListBox;
typedef struct _MailConversationListBoxClass MailConversationListBoxClass;

#define MAIL_TYPE_MESSAGE_LIST_BOX (mail_message_list_box_get_type ())
#define MAIL_MESSAGE_LIST_BOX(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_MESSAGE_LIST_BOX, MailMessageListBox))
#define MAIL_MESSAGE_LIST_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_MESSAGE_LIST_BOX, MailMessageListBoxClass))
#define MAIL_IS_MESSAGE_LIST_BOX(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_MESSAGE_LIST_BOX))
#define MAIL_IS_MESSAGE_LIST_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_MESSAGE_LIST_BOX))
#define MAIL_MESSAGE_LIST_BOX_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_MESSAGE_LIST_BOX, MailMessageListBoxClass))

typedef struct _MailMessageListBox MailMessageListBox;
typedef struct _MailMessageListBoxClass MailMessageListBoxClass;
enum  {
	MAIL_MAIN_WINDOW_0_PROPERTY,
	MAIL_MAIN_WINDOW_IS_SESSION_STARTED_PROPERTY,
	MAIL_MAIN_WINDOW_NUM_PROPERTIES
};
static GParamSpec* mail_main_window_properties[MAIL_MAIN_WINDOW_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define MAIL_TYPE_COMPOSER_WINDOW (mail_composer_window_get_type ())
#define MAIL_COMPOSER_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_COMPOSER_WINDOW, MailComposerWindow))
#define MAIL_COMPOSER_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_COMPOSER_WINDOW, MailComposerWindowClass))
#define MAIL_IS_COMPOSER_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_COMPOSER_WINDOW))
#define MAIL_IS_COMPOSER_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_COMPOSER_WINDOW))
#define MAIL_COMPOSER_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_COMPOSER_WINDOW, MailComposerWindowClass))

typedef struct _MailComposerWindow MailComposerWindow;
typedef struct _MailComposerWindowClass MailComposerWindowClass;
typedef struct _Block5Data Block5Data;
typedef enum  {
	MAIL_COMPOSER_WIDGET_TYPE_REPLY,
	MAIL_COMPOSER_WIDGET_TYPE_REPLY_ALL,
	MAIL_COMPOSER_WIDGET_TYPE_FORWARD,
	MAIL_COMPOSER_WIDGET_TYPE_DRAFT
} MailComposerWidgetType;

#define MAIL_COMPOSER_WIDGET_TYPE_TYPE (mail_composer_widget_type_get_type ())

#define MAIL_TYPE_MESSAGE_LIST_ITEM (mail_message_list_item_get_type ())
#define MAIL_MESSAGE_LIST_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_MESSAGE_LIST_ITEM, MailMessageListItem))
#define MAIL_MESSAGE_LIST_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_MESSAGE_LIST_ITEM, MailMessageListItemClass))
#define MAIL_IS_MESSAGE_LIST_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_MESSAGE_LIST_ITEM))
#define MAIL_IS_MESSAGE_LIST_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_MESSAGE_LIST_ITEM))
#define MAIL_MESSAGE_LIST_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_MESSAGE_LIST_ITEM, MailMessageListItemClass))

typedef struct _MailMessageListItem MailMessageListItem;
typedef struct _MailMessageListItemClass MailMessageListItemClass;
typedef struct _Block6Data Block6Data;

#define MAIL_BACKEND_TYPE_SESSION (mail_backend_session_get_type ())
#define MAIL_BACKEND_SESSION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_BACKEND_TYPE_SESSION, MailBackendSession))
#define MAIL_BACKEND_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_BACKEND_TYPE_SESSION, MailBackendSessionClass))
#define MAIL_BACKEND_IS_SESSION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_BACKEND_TYPE_SESSION))
#define MAIL_BACKEND_IS_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_BACKEND_TYPE_SESSION))
#define MAIL_BACKEND_SESSION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_BACKEND_TYPE_SESSION, MailBackendSessionClass))

typedef struct _MailBackendSession MailBackendSession;
typedef struct _MailBackendSessionClass MailBackendSessionClass;
typedef struct _Block7Data Block7Data;
#define _g_free0(var) (var = (g_free (var), NULL))

#define MAIL_TYPE_WELCOME_VIEW (mail_welcome_view_get_type ())
#define MAIL_WELCOME_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_WELCOME_VIEW, MailWelcomeView))
#define MAIL_WELCOME_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_WELCOME_VIEW, MailWelcomeViewClass))
#define MAIL_IS_WELCOME_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_WELCOME_VIEW))
#define MAIL_IS_WELCOME_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_WELCOME_VIEW))
#define MAIL_WELCOME_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_WELCOME_VIEW, MailWelcomeViewClass))

typedef struct _MailWelcomeView MailWelcomeView;
typedef struct _MailWelcomeViewClass MailWelcomeViewClass;

#define MAIL_BACKEND_TYPE_ACCOUNT (mail_backend_account_get_type ())
#define MAIL_BACKEND_ACCOUNT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_BACKEND_TYPE_ACCOUNT, MailBackendAccount))
#define MAIL_BACKEND_ACCOUNT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_BACKEND_TYPE_ACCOUNT, MailBackendAccountClass))
#define MAIL_BACKEND_IS_ACCOUNT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_BACKEND_TYPE_ACCOUNT))
#define MAIL_BACKEND_IS_ACCOUNT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_BACKEND_TYPE_ACCOUNT))
#define MAIL_BACKEND_ACCOUNT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_BACKEND_TYPE_ACCOUNT, MailBackendAccountClass))

typedef struct _MailBackendAccount MailBackendAccount;
typedef struct _MailBackendAccountClass MailBackendAccountClass;
enum  {
	MAIL_MAIN_WINDOW_SESSION_STARTED_SIGNAL,
	MAIL_MAIN_WINDOW_NUM_SIGNALS
};
static guint mail_main_window_signals[MAIL_MAIN_WINDOW_NUM_SIGNALS] = {0};

struct _MailMainWindow {
	HdyApplicationWindow parent_instance;
	MailMainWindowPrivate * priv;
};

struct _MailMainWindowClass {
	HdyApplicationWindowClass parent_class;
};

struct _MailMainWindowPrivate {
	MailHeaderBar* headerbar;
	GtkSearchEntry* search_entry;
	GtkPaned* paned_end;
	GtkPaned* paned_start;
	MailFoldersListView* folders_list_view;
	GtkOverlay* view_overlay;
	MailConversationListBox* conversation_list_box;
	MailMessageListBox* message_list_box;
	GraniteSwitchModelButton* hide_read_switch;
	GraniteSwitchModelButton* hide_unstarred_switch;
	GtkButton* refresh_button;
	GtkMenuButton* filter_button;
	GtkScrolledWindow* message_list_scrolled;
	GtkSpinner* refresh_spinner;
	GtkStack* refresh_stack;
	guint configure_id;
	guint search_changed_debounce_timeout_id;
	gboolean _is_session_started;
};

struct _Block5Data {
	int _ref_count_;
	MailMainWindow* self;
	GtkAdjustment* adjustment;
	gulong changed_id;
};

struct _Block6Data {
	int _ref_count_;
	MailMainWindow* self;
	GraniteWidgetsToast* toast;
};

struct _Block7Data {
	int _ref_count_;
	MailMainWindow* self;
	GraniteWidgetsOverlayBar* message_overlay;
	GtkStack* placeholder_stack;
	MailBackendSession* session;
};

static gint MailMainWindow_private_offset;
static gpointer mail_main_window_parent_class = NULL;
static GeeMultiMap* mail_main_window_action_accelerators;
static GeeMultiMap* mail_main_window_action_accelerators = NULL;
VALA_EXTERN GSettings* mail_application_settings;

VALA_EXTERN GType mail_main_window_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailMainWindow, g_object_unref)
VALA_EXTERN GType mail_header_bar_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailHeaderBar, g_object_unref)
VALA_EXTERN GType mail_folders_list_view_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailFoldersListView, g_object_unref)
VALA_EXTERN GType virtualizing_list_box_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (VirtualizingListBox, g_object_unref)
VALA_EXTERN GType mail_conversation_list_box_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailConversationListBox, g_object_unref)
VALA_EXTERN GType mail_message_list_box_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailMessageListBox, g_object_unref)
static void mail_main_window_on_compose_message (MailMainWindow* self);
static void _mail_main_window_on_compose_message_gsimple_action_activate_callback (GSimpleAction* action,
                                                                            GVariant* parameter,
                                                                            gpointer self);
static void mail_main_window_on_refresh (MailMainWindow* self);
static void _mail_main_window_on_refresh_gsimple_action_activate_callback (GSimpleAction* action,
                                                                    GVariant* parameter,
                                                                    gpointer self);
static void mail_main_window_on_reply (MailMainWindow* self);
static void _mail_main_window_on_reply_gsimple_action_activate_callback (GSimpleAction* action,
                                                                  GVariant* parameter,
                                                                  gpointer self);
static void mail_main_window_on_reply_all (MailMainWindow* self);
static void _mail_main_window_on_reply_all_gsimple_action_activate_callback (GSimpleAction* action,
                                                                      GVariant* parameter,
                                                                      gpointer self);
static void mail_main_window_on_forward (MailMainWindow* self);
static void _mail_main_window_on_forward_gsimple_action_activate_callback (GSimpleAction* action,
                                                                    GVariant* parameter,
                                                                    gpointer self);
static void mail_main_window_on_mark_read (MailMainWindow* self);
static void _mail_main_window_on_mark_read_gsimple_action_activate_callback (GSimpleAction* action,
                                                                      GVariant* parameter,
                                                                      gpointer self);
static void mail_main_window_on_mark_star (MailMainWindow* self);
static void _mail_main_window_on_mark_star_gsimple_action_activate_callback (GSimpleAction* action,
                                                                      GVariant* parameter,
                                                                      gpointer self);
static void mail_main_window_on_mark_unread (MailMainWindow* self);
static void _mail_main_window_on_mark_unread_gsimple_action_activate_callback (GSimpleAction* action,
                                                                        GVariant* parameter,
                                                                        gpointer self);
static void mail_main_window_on_mark_unstar (MailMainWindow* self);
static void _mail_main_window_on_mark_unstar_gsimple_action_activate_callback (GSimpleAction* action,
                                                                        GVariant* parameter,
                                                                        gpointer self);
static void mail_main_window_on_archive (MailMainWindow* self);
static void _mail_main_window_on_archive_gsimple_action_activate_callback (GSimpleAction* action,
                                                                    GVariant* parameter,
                                                                    gpointer self);
static void mail_main_window_on_move_to_trash (MailMainWindow* self);
static void _mail_main_window_on_move_to_trash_gsimple_action_activate_callback (GSimpleAction* action,
                                                                          GVariant* parameter,
                                                                          gpointer self);
static void mail_main_window_on_fullscreen (MailMainWindow* self);
static void _mail_main_window_on_fullscreen_gsimple_action_activate_callback (GSimpleAction* action,
                                                                       GVariant* parameter,
                                                                       gpointer self);
VALA_EXTERN MailMainWindow* mail_main_window_new (GtkApplication* application);
VALA_EXTERN MailMainWindow* mail_main_window_construct (GType object_type,
                                            GtkApplication* application);
static void mail_main_window_on_filter_button_changed (MailMainWindow* self);
VALA_EXTERN void mail_conversation_list_box_search (MailConversationListBox* self,
                                        const gchar* query,
                                        gboolean hide_read,
                                        gboolean hide_unstarred,
                                        GAsyncReadyCallback _callback_,
                                        gpointer _user_data_);
VALA_EXTERN void mail_conversation_list_box_search_finish (MailConversationListBox* self,
                                               GAsyncResult* _res_);
VALA_EXTERN MailComposerWindow* mail_composer_window_new (GtkWindow* parent,
                                              const gchar* to,
                                              const gchar* mailto_query);
VALA_EXTERN MailComposerWindow* mail_composer_window_construct (GType object_type,
                                                    GtkWindow* parent,
                                                    const gchar* to,
                                                    const gchar* mailto_query);
VALA_EXTERN GType mail_composer_window_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailComposerWindow, g_object_unref)
VALA_EXTERN void mail_conversation_list_box_refresh_folder (MailConversationListBox* self,
                                                GCancellable* cancellable,
                                                GAsyncReadyCallback _callback_,
                                                gpointer _user_data_);
VALA_EXTERN void mail_conversation_list_box_refresh_folder_finish (MailConversationListBox* self,
                                                       GAsyncResult* _res_);
static void __lambda94_ (MailMainWindow* self,
                  GObject* obj,
                  GAsyncResult* res);
static void ___lambda94__gasync_ready_callback (GObject* source_object,
                                         GAsyncResult* res,
                                         gpointer self);
static void mail_main_window_scroll_message_list_to_bottom (MailMainWindow* self);
static Block5Data* block5_data_ref (Block5Data* _data5_);
static void block5_data_unref (void * _userdata_);
static void __lambda95_ (Block5Data* _data5_);
static void ___lambda95__gtk_adjustment_changed (GtkAdjustment* _sender,
                                          gpointer self);
VALA_EXTERN void mail_conversation_list_box_mark_read_selected_messages (MailConversationListBox* self);
VALA_EXTERN void mail_conversation_list_box_mark_star_selected_messages (MailConversationListBox* self);
VALA_EXTERN void mail_conversation_list_box_mark_unread_selected_messages (MailConversationListBox* self);
VALA_EXTERN void mail_conversation_list_box_mark_unstar_selected_messages (MailConversationListBox* self);
VALA_EXTERN GType mail_composer_widget_type_get_type (void) G_GNUC_CONST ;
VALA_EXTERN GType mail_message_list_item_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailMessageListItem, g_object_unref)
VALA_EXTERN void mail_message_list_box_add_inline_composer (MailMessageListBox* self,
                                                MailComposerWidgetType type,
                                                MailMessageListItem* message_item,
                                                GAsyncReadyCallback _callback_,
                                                gpointer _user_data_);
VALA_EXTERN void mail_message_list_box_add_inline_composer_finish (MailMessageListBox* self,
                                                       GAsyncResult* _res_);
VALA_EXTERN void mail_conversation_list_box_archive_selected_messages (MailConversationListBox* self,
                                                           GAsyncReadyCallback _callback_,
                                                           gpointer _user_data_);
VALA_EXTERN gint mail_conversation_list_box_archive_selected_messages_finish (MailConversationListBox* self,
                                                                  GAsyncResult* _res_);
static void __lambda96_ (MailMainWindow* self,
                  GObject* obj,
                  GAsyncResult* res);
static void ___lambda96__gasync_ready_callback (GObject* source_object,
                                         GAsyncResult* res,
                                         gpointer self);
VALA_EXTERN gint mail_conversation_list_box_trash_selected_messages (MailConversationListBox* self);
static void mail_main_window_send_move_toast (MailMainWindow* self,
                                       const gchar* message);
static Block6Data* block6_data_ref (Block6Data* _data6_);
static void block6_data_unref (void * _userdata_);
static void __lambda97_ (MailMainWindow* self);
VALA_EXTERN void mail_conversation_list_box_undo_move (MailConversationListBox* self);
static void ___lambda97__granite_widgets_toast_default_action (GraniteWidgetsToast* _sender,
                                                        gpointer self);
static void __lambda98_ (Block6Data* _data6_);
VALA_EXTERN void mail_conversation_list_box_undo_expired (MailConversationListBox* self);
static void ___lambda98__g_object_notify (GObject* _sender,
                                   GParamSpec* pspec,
                                   gpointer self);
static GSimpleAction* mail_main_window_get_action (MailMainWindow* self,
                                            const gchar* name);
static gboolean mail_main_window_real_configure_event (GtkWidget* base,
                                                GdkEventConfigure* event);
static gboolean __lambda99_ (MailMainWindow* self);
static gboolean ___lambda99__gsource_func (gpointer self);
VALA_EXTERN gboolean mail_main_window_get_is_session_started (MailMainWindow* self);
static void mail_main_window_set_is_session_started (MailMainWindow* self,
                                              gboolean value);
static GObject * mail_main_window_constructor (GType type,
                                        guint n_construct_properties,
                                        GObjectConstructParam * construct_properties);
VALA_EXTERN GType mail_backend_session_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailBackendSession, g_object_unref)
static Block7Data* block7_data_ref (Block7Data* _data7_);
static void block7_data_unref (void * _userdata_);
VALA_EXTERN MailHeaderBar* mail_header_bar_new (void);
VALA_EXTERN MailHeaderBar* mail_header_bar_construct (GType object_type);
VALA_EXTERN MailFoldersListView* mail_folders_list_view_new (void);
VALA_EXTERN MailFoldersListView* mail_folders_list_view_construct (GType object_type);
VALA_EXTERN MailConversationListBox* mail_conversation_list_box_new (void);
VALA_EXTERN MailConversationListBox* mail_conversation_list_box_construct (GType object_type);
static void _mail_main_window___lambda100_ (MailMainWindow* self,
                                     GtkWidget* widget);
static void __mail_main_window___lambda100__gtk_container_set_focus_child (GtkContainer* _sender,
                                                                    GtkWidget* child,
                                                                    gpointer self);
VALA_EXTERN MailMessageListBox* mail_message_list_box_new (void);
VALA_EXTERN MailMessageListBox* mail_message_list_box_construct (GType object_type);
static void _mail_main_window___lambda101_ (Block7Data* _data7_,
                                     const gchar* label,
                                     const gchar* url);
static void __mail_main_window___lambda101__mail_message_list_box_hovering_over_link (MailMessageListBox* _sender,
                                                                               const gchar* label,
                                                                               const gchar* uri,
                                                                               gpointer self);
VALA_EXTERN GType mail_welcome_view_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailWelcomeView, g_object_unref)
VALA_EXTERN MailWelcomeView* mail_welcome_view_new (void);
VALA_EXTERN MailWelcomeView* mail_welcome_view_construct (GType object_type);
VALA_EXTERN HdyHeaderBar* mail_folders_list_view_get_header_bar (MailFoldersListView* self);
static void _mail_main_window___lambda103_ (MailMainWindow* self);
static void __mail_main_window___lambda103__gtk_widget_destroy (GtkWidget* _sender,
                                                         gpointer self);
VALA_EXTERN GType mail_backend_account_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailBackendAccount, g_object_unref)
static void _mail_main_window___lambda104_ (MailMainWindow* self,
                                     GeeMap* folder_full_name_per_account);
VALA_EXTERN void mail_conversation_list_box_load_folder (MailConversationListBox* self,
                                             GeeMap* folder_full_name_per_account,
                                             GAsyncReadyCallback _callback_,
                                             gpointer _user_data_);
VALA_EXTERN void mail_conversation_list_box_load_folder_finish (MailConversationListBox* self,
                                                    GAsyncResult* _res_);
static void __mail_main_window___lambda104__mail_folders_list_view_folder_selected (MailFoldersListView* _sender,
                                                                             GeeMap* folder_full_name_per_account,
                                                                             gpointer self);
static void _mail_main_window___lambda105_ (MailMainWindow* self,
                                     CamelFolderThreadNode* node);
VALA_EXTERN void mail_message_list_box_set_conversation (MailMessageListBox* self,
                                             CamelFolderThreadNode* node);
static void ___lambda106_ (MailMainWindow* self,
                    GObject* obj,
                    GAsyncResult* res);
static void ____lambda106__gasync_ready_callback (GObject* source_object,
                                           GAsyncResult* res,
                                           gpointer self);
static void __mail_main_window___lambda105__mail_conversation_list_box_conversation_selected (MailConversationListBox* _sender,
                                                                                       CamelFolderThreadNode* node,
                                                                                       gpointer self);
static void _mail_main_window_on_filter_button_changed_g_object_notify (GObject* _sender,
                                                                 GParamSpec* pspec,
                                                                 gpointer self);
static void _mail_main_window___lambda107_ (MailMainWindow* self);
static gboolean __lambda108_ (MailMainWindow* self);
static gboolean ___lambda108__gsource_func (gpointer self);
static void __mail_main_window___lambda107__gtk_search_entry_search_changed (GtkSearchEntry* _sender,
                                                                      gpointer self);
VALA_EXTERN MailBackendSession* mail_backend_session_get_default (void);
static void _mail_main_window___lambda109_ (Block7Data* _data7_);
VALA_EXTERN GeeLinkedList* mail_backend_session_get_accounts (MailBackendSession* self);
static void __mail_main_window___lambda109__mail_backend_session_account_removed (MailBackendSession* _sender,
                                                                           MailBackendAccount* account,
                                                                           gpointer self);
VALA_EXTERN void mail_backend_session_start (MailBackendSession* self,
                                 GAsyncReadyCallback _callback_,
                                 gpointer _user_data_);
VALA_EXTERN void mail_backend_session_start_finish (MailBackendSession* self,
                                        GAsyncResult* _res_);
static void _mail_main_window___lambda110_ (Block7Data* _data7_,
                                     GObject* obj,
                                     GAsyncResult* res);
static void __mail_main_window___lambda110__gasync_ready_callback (GObject* source_object,
                                                            GAsyncResult* res,
                                                            gpointer self);
static void mail_main_window_finalize (GObject * obj);
static GType mail_main_window_get_type_once (void);
static void _vala_mail_main_window_get_property (GObject * object,
                                          guint property_id,
                                          GValue * value,
                                          GParamSpec * pspec);
static void _vala_mail_main_window_set_property (GObject * object,
                                          guint property_id,
                                          const GValue * value,
                                          GParamSpec * pspec);
static void _vala_array_destroy (gpointer array,
                          gssize array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gssize array_length,
                       GDestroyNotify destroy_func);
static gssize _vala_array_length (gpointer array);

static const GActionEntry MAIL_MAIN_WINDOW_ACTION_ENTRIES[12] = {{MAIL_MAIN_WINDOW_ACTION_COMPOSE_MESSAGE, _mail_main_window_on_compose_message_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_REFRESH, _mail_main_window_on_refresh_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_REPLY, _mail_main_window_on_reply_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_REPLY_ALL, _mail_main_window_on_reply_all_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_FORWARD, _mail_main_window_on_forward_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_MARK_READ, _mail_main_window_on_mark_read_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_MARK_STAR, _mail_main_window_on_mark_star_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_MARK_UNREAD, _mail_main_window_on_mark_unread_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_MARK_UNSTAR, _mail_main_window_on_mark_unstar_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_ARCHIVE, _mail_main_window_on_archive_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_MOVE_TO_TRASH, _mail_main_window_on_move_to_trash_gsimple_action_activate_callback}, {MAIL_MAIN_WINDOW_ACTION_FULLSCREEN, _mail_main_window_on_fullscreen_gsimple_action_activate_callback}};

static inline gpointer
mail_main_window_get_instance_private (MailMainWindow* self)
{
	return G_STRUCT_MEMBER_P (self, MailMainWindow_private_offset);
}

static void
_mail_main_window_on_compose_message_gsimple_action_activate_callback (GSimpleAction* action,
                                                                       GVariant* parameter,
                                                                       gpointer self)
{
	mail_main_window_on_compose_message ((MailMainWindow*) self);
}

static void
_mail_main_window_on_refresh_gsimple_action_activate_callback (GSimpleAction* action,
                                                               GVariant* parameter,
                                                               gpointer self)
{
	mail_main_window_on_refresh ((MailMainWindow*) self);
}

static void
_mail_main_window_on_reply_gsimple_action_activate_callback (GSimpleAction* action,
                                                             GVariant* parameter,
                                                             gpointer self)
{
	mail_main_window_on_reply ((MailMainWindow*) self);
}

static void
_mail_main_window_on_reply_all_gsimple_action_activate_callback (GSimpleAction* action,
                                                                 GVariant* parameter,
                                                                 gpointer self)
{
	mail_main_window_on_reply_all ((MailMainWindow*) self);
}

static void
_mail_main_window_on_forward_gsimple_action_activate_callback (GSimpleAction* action,
                                                               GVariant* parameter,
                                                               gpointer self)
{
	mail_main_window_on_forward ((MailMainWindow*) self);
}

static void
_mail_main_window_on_mark_read_gsimple_action_activate_callback (GSimpleAction* action,
                                                                 GVariant* parameter,
                                                                 gpointer self)
{
	mail_main_window_on_mark_read ((MailMainWindow*) self);
}

static void
_mail_main_window_on_mark_star_gsimple_action_activate_callback (GSimpleAction* action,
                                                                 GVariant* parameter,
                                                                 gpointer self)
{
	mail_main_window_on_mark_star ((MailMainWindow*) self);
}

static void
_mail_main_window_on_mark_unread_gsimple_action_activate_callback (GSimpleAction* action,
                                                                   GVariant* parameter,
                                                                   gpointer self)
{
	mail_main_window_on_mark_unread ((MailMainWindow*) self);
}

static void
_mail_main_window_on_mark_unstar_gsimple_action_activate_callback (GSimpleAction* action,
                                                                   GVariant* parameter,
                                                                   gpointer self)
{
	mail_main_window_on_mark_unstar ((MailMainWindow*) self);
}

static void
_mail_main_window_on_archive_gsimple_action_activate_callback (GSimpleAction* action,
                                                               GVariant* parameter,
                                                               gpointer self)
{
	mail_main_window_on_archive ((MailMainWindow*) self);
}

static void
_mail_main_window_on_move_to_trash_gsimple_action_activate_callback (GSimpleAction* action,
                                                                     GVariant* parameter,
                                                                     gpointer self)
{
	mail_main_window_on_move_to_trash ((MailMainWindow*) self);
}

static void
_mail_main_window_on_fullscreen_gsimple_action_activate_callback (GSimpleAction* action,
                                                                  GVariant* parameter,
                                                                  gpointer self)
{
	mail_main_window_on_fullscreen ((MailMainWindow*) self);
}

MailMainWindow*
mail_main_window_construct (GType object_type,
                            GtkApplication* application)
{
	MailMainWindow * self = NULL;
	g_return_val_if_fail (application != NULL, NULL);
	self = (MailMainWindow*) g_object_new (object_type, "application", application, "height-request", 600, "icon-name", "io.elementary.mail", "width-request", 800, "title", _ ("Mail"), NULL);
	return self;
}

MailMainWindow*
mail_main_window_new (GtkApplication* application)
{
	return mail_main_window_construct (MAIL_TYPE_MAIN_WINDOW, application);
}

static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}

static void
mail_main_window_on_filter_button_changed (MailMainWindow* self)
{
	GtkStyleContext* style_context = NULL;
	GtkMenuButton* _tmp0_;
	GtkStyleContext* _tmp1_;
	GtkStyleContext* _tmp2_;
	gboolean _tmp3_ = FALSE;
	GraniteSwitchModelButton* _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp6_;
	MailConversationListBox* _tmp14_;
	GtkSearchEntry* _tmp15_;
	const gchar* _tmp16_;
	const gchar* _tmp17_;
	GraniteSwitchModelButton* _tmp18_;
	gboolean _tmp19_;
	gboolean _tmp20_;
	GraniteSwitchModelButton* _tmp21_;
	gboolean _tmp22_;
	gboolean _tmp23_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->filter_button;
	_tmp1_ = gtk_widget_get_style_context ((GtkWidget*) _tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	style_context = _tmp2_;
	_tmp4_ = self->priv->hide_read_switch;
	_tmp5_ = gtk_toggle_button_get_active ((GtkToggleButton*) _tmp4_);
	_tmp6_ = _tmp5_;
	if (_tmp6_) {
		_tmp3_ = TRUE;
	} else {
		GraniteSwitchModelButton* _tmp7_;
		gboolean _tmp8_;
		gboolean _tmp9_;
		_tmp7_ = self->priv->hide_unstarred_switch;
		_tmp8_ = gtk_toggle_button_get_active ((GtkToggleButton*) _tmp7_);
		_tmp9_ = _tmp8_;
		_tmp3_ = _tmp9_;
	}
	if (_tmp3_) {
		GtkStyleContext* _tmp10_;
		_tmp10_ = style_context;
		if (!gtk_style_context_has_class (_tmp10_, GRANITE_STYLE_CLASS_ACCENT)) {
			GtkStyleContext* _tmp11_;
			_tmp11_ = style_context;
			gtk_style_context_add_class (_tmp11_, GRANITE_STYLE_CLASS_ACCENT);
		}
	} else {
		GtkStyleContext* _tmp12_;
		_tmp12_ = style_context;
		if (gtk_style_context_has_class (_tmp12_, GRANITE_STYLE_CLASS_ACCENT)) {
			GtkStyleContext* _tmp13_;
			_tmp13_ = style_context;
			gtk_style_context_remove_class (_tmp13_, GRANITE_STYLE_CLASS_ACCENT);
		}
	}
	_tmp14_ = self->priv->conversation_list_box;
	_tmp15_ = self->priv->search_entry;
	_tmp16_ = gtk_entry_get_text ((GtkEntry*) _tmp15_);
	_tmp17_ = _tmp16_;
	_tmp18_ = self->priv->hide_read_switch;
	_tmp19_ = gtk_toggle_button_get_active ((GtkToggleButton*) _tmp18_);
	_tmp20_ = _tmp19_;
	_tmp21_ = self->priv->hide_unstarred_switch;
	_tmp22_ = gtk_toggle_button_get_active ((GtkToggleButton*) _tmp21_);
	_tmp23_ = _tmp22_;
	mail_conversation_list_box_search (_tmp14_, _tmp17_, _tmp20_, _tmp23_, NULL, NULL);
	_g_object_unref0 (style_context);
}

static void
mail_main_window_on_compose_message (MailMainWindow* self)
{
	MailComposerWindow* _tmp0_;
	MailComposerWindow* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = mail_composer_window_new ((GtkWindow*) self, NULL, NULL);
	g_object_ref_sink (_tmp0_);
	_tmp1_ = _tmp0_;
	gtk_widget_show_all ((GtkWidget*) _tmp1_);
	_g_object_unref0 (_tmp1_);
}

static void
__lambda94_ (MailMainWindow* self,
             GObject* obj,
             GAsyncResult* res)
{
	MailConversationListBox* _tmp0_;
	GtkStack* _tmp1_;
	GtkButton* _tmp2_;
	g_return_if_fail (res != NULL);
	_tmp0_ = self->priv->conversation_list_box;
	mail_conversation_list_box_refresh_folder_finish (_tmp0_, res);
	_tmp1_ = self->priv->refresh_stack;
	_tmp2_ = self->priv->refresh_button;
	gtk_stack_set_visible_child (_tmp1_, (GtkWidget*) _tmp2_);
}

static void
___lambda94__gasync_ready_callback (GObject* source_object,
                                    GAsyncResult* res,
                                    gpointer self)
{
	__lambda94_ ((MailMainWindow*) self, source_object, res);
	g_object_unref (self);
}

static void
mail_main_window_on_refresh (MailMainWindow* self)
{
	GtkStack* _tmp0_;
	GtkSpinner* _tmp1_;
	MailConversationListBox* _tmp2_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->refresh_stack;
	_tmp1_ = self->priv->refresh_spinner;
	gtk_stack_set_visible_child (_tmp0_, (GtkWidget*) _tmp1_);
	_tmp2_ = self->priv->conversation_list_box;
	mail_conversation_list_box_refresh_folder (_tmp2_, NULL, ___lambda94__gasync_ready_callback, g_object_ref (self));
}

static Block5Data*
block5_data_ref (Block5Data* _data5_)
{
	g_atomic_int_inc (&_data5_->_ref_count_);
	return _data5_;
}

static void
block5_data_unref (void * _userdata_)
{
	Block5Data* _data5_;
	_data5_ = (Block5Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data5_->_ref_count_)) {
		MailMainWindow* self;
		self = _data5_->self;
		_g_object_unref0 (_data5_->adjustment);
		_g_object_unref0 (self);
		g_slice_free (Block5Data, _data5_);
	}
}

static void
__lambda95_ (Block5Data* _data5_)
{
	MailMainWindow* self;
	self = _data5_->self;
	gtk_adjustment_set_value (_data5_->adjustment, gtk_adjustment_get_upper (_data5_->adjustment));
	g_signal_handler_disconnect ((GObject*) _data5_->adjustment, _data5_->changed_id);
}

static void
___lambda95__gtk_adjustment_changed (GtkAdjustment* _sender,
                                     gpointer self)
{
	__lambda95_ (self);
}

static void
mail_main_window_scroll_message_list_to_bottom (MailMainWindow* self)
{
	Block5Data* _data5_;
	GtkScrolledWindow* _tmp0_;
	GtkAdjustment* _tmp1_;
	GtkAdjustment* _tmp2_;
	gulong _tmp3_;
	g_return_if_fail (self != NULL);
	_data5_ = g_slice_new0 (Block5Data);
	_data5_->_ref_count_ = 1;
	_data5_->self = g_object_ref (self);
	_tmp0_ = self->priv->message_list_scrolled;
	_tmp1_ = gtk_scrolled_window_get_vadjustment (_tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	_data5_->adjustment = _tmp2_;
	_data5_->changed_id = (gulong) 0;
	_tmp3_ = g_signal_connect_data (_data5_->adjustment, "changed", (GCallback) ___lambda95__gtk_adjustment_changed, block5_data_ref (_data5_), (GClosureNotify) block5_data_unref, 0);
	_data5_->changed_id = _tmp3_;
	block5_data_unref (_data5_);
	_data5_ = NULL;
}

static void
mail_main_window_on_mark_read (MailMainWindow* self)
{
	MailConversationListBox* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->conversation_list_box;
	mail_conversation_list_box_mark_read_selected_messages (_tmp0_);
}

static void
mail_main_window_on_mark_star (MailMainWindow* self)
{
	MailConversationListBox* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->conversation_list_box;
	mail_conversation_list_box_mark_star_selected_messages (_tmp0_);
}

static void
mail_main_window_on_mark_unread (MailMainWindow* self)
{
	MailConversationListBox* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->conversation_list_box;
	mail_conversation_list_box_mark_unread_selected_messages (_tmp0_);
}

static void
mail_main_window_on_mark_unstar (MailMainWindow* self)
{
	MailConversationListBox* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->conversation_list_box;
	mail_conversation_list_box_mark_unstar_selected_messages (_tmp0_);
}

static void
mail_main_window_on_reply (MailMainWindow* self)
{
	MailMessageListBox* _tmp0_;
	g_return_if_fail (self != NULL);
	mail_main_window_scroll_message_list_to_bottom (self);
	_tmp0_ = self->priv->message_list_box;
	mail_message_list_box_add_inline_composer (_tmp0_, MAIL_COMPOSER_WIDGET_TYPE_REPLY, NULL, NULL, NULL);
}

static void
mail_main_window_on_reply_all (MailMainWindow* self)
{
	MailMessageListBox* _tmp0_;
	g_return_if_fail (self != NULL);
	mail_main_window_scroll_message_list_to_bottom (self);
	_tmp0_ = self->priv->message_list_box;
	mail_message_list_box_add_inline_composer (_tmp0_, MAIL_COMPOSER_WIDGET_TYPE_REPLY_ALL, NULL, NULL, NULL);
}

static void
mail_main_window_on_forward (MailMainWindow* self)
{
	MailMessageListBox* _tmp0_;
	g_return_if_fail (self != NULL);
	mail_main_window_scroll_message_list_to_bottom (self);
	_tmp0_ = self->priv->message_list_box;
	mail_message_list_box_add_inline_composer (_tmp0_, MAIL_COMPOSER_WIDGET_TYPE_FORWARD, NULL, NULL, NULL);
}

static void
__lambda96_ (MailMainWindow* self,
             GObject* obj,
             GAsyncResult* res)
{
	MailConversationListBox* _tmp0_;
	g_return_if_fail (res != NULL);
	_tmp0_ = self->priv->conversation_list_box;
	mail_conversation_list_box_archive_selected_messages_finish (_tmp0_, res);
}

static void
___lambda96__gasync_ready_callback (GObject* source_object,
                                    GAsyncResult* res,
                                    gpointer self)
{
	__lambda96_ ((MailMainWindow*) self, source_object, res);
	g_object_unref (self);
}

static void
mail_main_window_on_archive (MailMainWindow* self)
{
	MailConversationListBox* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->conversation_list_box;
	mail_conversation_list_box_archive_selected_messages (_tmp0_, ___lambda96__gasync_ready_callback, g_object_ref (self));
}

static void
mail_main_window_on_move_to_trash (MailMainWindow* self)
{
	gint _result_ = 0;
	MailConversationListBox* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->conversation_list_box;
	_result_ = mail_conversation_list_box_trash_selected_messages (_tmp0_);
	if (_result_ > 0) {
		mail_main_window_send_move_toast (self, ngettext ("Message Deleted", "Messages Deleted", (gulong) _result_));
	}
}

static Block6Data*
block6_data_ref (Block6Data* _data6_)
{
	g_atomic_int_inc (&_data6_->_ref_count_);
	return _data6_;
}

static void
block6_data_unref (void * _userdata_)
{
	Block6Data* _data6_;
	_data6_ = (Block6Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data6_->_ref_count_)) {
		MailMainWindow* self;
		self = _data6_->self;
		_g_object_unref0 (_data6_->toast);
		_g_object_unref0 (self);
		g_slice_free (Block6Data, _data6_);
	}
}

static void
__lambda97_ (MailMainWindow* self)
{
	MailConversationListBox* _tmp0_;
	_tmp0_ = self->priv->conversation_list_box;
	mail_conversation_list_box_undo_move (_tmp0_);
}

static void
___lambda97__granite_widgets_toast_default_action (GraniteWidgetsToast* _sender,
                                                   gpointer self)
{
	__lambda97_ ((MailMainWindow*) self);
}

static void
__lambda98_ (Block6Data* _data6_)
{
	MailMainWindow* self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	self = _data6_->self;
	_tmp0_ = gtk_revealer_get_child_revealed ((GtkRevealer*) _data6_->toast);
	_tmp1_ = _tmp0_;
	if (!_tmp1_) {
		MailConversationListBox* _tmp2_;
		_tmp2_ = self->priv->conversation_list_box;
		mail_conversation_list_box_undo_expired (_tmp2_);
	}
}

static void
___lambda98__g_object_notify (GObject* _sender,
                              GParamSpec* pspec,
                              gpointer self)
{
	__lambda98_ (self);
}

static void
mail_main_window_send_move_toast (MailMainWindow* self,
                                  const gchar* message)
{
	Block6Data* _data6_;
	GtkOverlay* _tmp0_;
	GList* _tmp1_;
	GraniteWidgetsToast* _tmp4_;
	GtkOverlay* _tmp5_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (message != NULL);
	_data6_ = g_slice_new0 (Block6Data);
	_data6_->_ref_count_ = 1;
	_data6_->self = g_object_ref (self);
	_tmp0_ = self->priv->view_overlay;
	_tmp1_ = gtk_container_get_children ((GtkContainer*) _tmp0_);
	{
		GList* child_collection = NULL;
		GList* child_it = NULL;
		child_collection = _tmp1_;
		for (child_it = child_collection; child_it != NULL; child_it = child_it->next) {
			GtkWidget* child = NULL;
			child = (GtkWidget*) child_it->data;
			{
				GtkWidget* _tmp2_;
				_tmp2_ = child;
				if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp2_, GRANITE_WIDGETS_TYPE_TOAST)) {
					GtkWidget* _tmp3_;
					_tmp3_ = child;
					gtk_widget_destroy (_tmp3_);
				}
			}
		}
		(child_collection == NULL) ? NULL : (child_collection = (g_list_free (child_collection), NULL));
	}
	_tmp4_ = granite_widgets_toast_new (message);
	g_object_ref_sink (_tmp4_);
	_data6_->toast = _tmp4_;
	granite_widgets_toast_set_default_action (_data6_->toast, _ ("Undo"));
	gtk_widget_show_all ((GtkWidget*) _data6_->toast);
	g_signal_connect_object (_data6_->toast, "default-action", (GCallback) ___lambda97__granite_widgets_toast_default_action, self, 0);
	g_signal_connect_data ((GObject*) _data6_->toast, "notify::child-revealed", (GCallback) ___lambda98__g_object_notify, block6_data_ref (_data6_), (GClosureNotify) block6_data_unref, 0);
	_tmp5_ = self->priv->view_overlay;
	gtk_overlay_add_overlay (_tmp5_, (GtkWidget*) _data6_->toast);
	granite_widgets_toast_send_notification (_data6_->toast);
	block6_data_unref (_data6_);
	_data6_ = NULL;
}

static void
mail_main_window_on_fullscreen (MailMainWindow* self)
{
	GdkWindow* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = gtk_widget_get_window ((GtkWidget*) self);
	if ((gdk_window_get_state (_tmp0_) & GDK_WINDOW_STATE_FULLSCREEN) == GDK_WINDOW_STATE_FULLSCREEN) {
		MailHeaderBar* _tmp1_;
		_tmp1_ = self->priv->headerbar;
		hdy_header_bar_set_show_close_button ((HdyHeaderBar*) _tmp1_, TRUE);
		gtk_window_unfullscreen ((GtkWindow*) self);
	} else {
		MailHeaderBar* _tmp2_;
		_tmp2_ = self->priv->headerbar;
		hdy_header_bar_set_show_close_button ((HdyHeaderBar*) _tmp2_, FALSE);
		gtk_window_fullscreen ((GtkWindow*) self);
	}
}

static GSimpleAction*
mail_main_window_get_action (MailMainWindow* self,
                             const gchar* name)
{
	GAction* _tmp0_;
	GSimpleAction* _tmp1_;
	GSimpleAction* result;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (name != NULL, NULL);
	_tmp0_ = g_action_map_lookup_action ((GActionMap*) self, name);
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, g_simple_action_get_type ()) ? ((GSimpleAction*) _tmp0_) : NULL);
	result = _tmp1_;
	return result;
}

static gboolean
__lambda99_ (MailMainWindow* self)
{
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean result;
	self->priv->configure_id = (guint) 0;
	g_object_get ((GtkWindow*) self, "is-maximized", &_tmp0_, NULL);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		GSettings* _tmp2_;
		_tmp2_ = mail_application_settings;
		g_settings_set_boolean (_tmp2_, "window-maximized", TRUE);
	} else {
		GSettings* _tmp3_;
		GdkRectangle rect = {0};
		GtkAllocation _tmp4_ = {0};
		GSettings* _tmp5_;
		GdkRectangle _tmp6_;
		GdkRectangle _tmp7_;
		gint root_x = 0;
		gint root_y = 0;
		gint _tmp8_ = 0;
		gint _tmp9_ = 0;
		GSettings* _tmp10_;
		_tmp3_ = mail_application_settings;
		g_settings_set_boolean (_tmp3_, "window-maximized", FALSE);
		gtk_widget_get_allocation ((GtkWidget*) self, &_tmp4_);
		rect = _tmp4_;
		_tmp5_ = mail_application_settings;
		_tmp6_ = rect;
		_tmp7_ = rect;
		g_settings_set (_tmp5_, "window-size", "(ii)", _tmp6_.width, _tmp7_.height);
		gtk_window_get_position ((GtkWindow*) self, &_tmp8_, &_tmp9_);
		root_x = _tmp8_;
		root_y = _tmp9_;
		_tmp10_ = mail_application_settings;
		g_settings_set (_tmp10_, "window-position", "(ii)", root_x, root_y);
	}
	result = FALSE;
	return result;
}

static gboolean
___lambda99__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda99_ ((MailMainWindow*) self);
	return result;
}

static gboolean
mail_main_window_real_configure_event (GtkWidget* base,
                                       GdkEventConfigure* event)
{
	MailMainWindow * self;
	gboolean result;
	self = (MailMainWindow*) base;
	g_return_val_if_fail (event != NULL, FALSE);
	if (self->priv->configure_id != ((guint) 0)) {
		g_source_remove (self->priv->configure_id);
	}
	self->priv->configure_id = g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 100, ___lambda99__gsource_func, g_object_ref (self), g_object_unref);
	result = GTK_WIDGET_CLASS (mail_main_window_parent_class)->configure_event ((GtkWidget*) G_TYPE_CHECK_INSTANCE_CAST (self, hdy_application_window_get_type (), HdyApplicationWindow), event);
	return result;
}

gboolean
mail_main_window_get_is_session_started (MailMainWindow* self)
{
	gboolean result;
	g_return_val_if_fail (self != NULL, FALSE);
	result = self->priv->_is_session_started;
	return result;
}

static void
mail_main_window_set_is_session_started (MailMainWindow* self,
                                         gboolean value)
{
	gboolean old_value;
	g_return_if_fail (self != NULL);
	old_value = mail_main_window_get_is_session_started (self);
	if (old_value != value) {
		self->priv->_is_session_started = value;
		g_object_notify_by_pspec ((GObject *) self, mail_main_window_properties[MAIL_MAIN_WINDOW_IS_SESSION_STARTED_PROPERTY]);
	}
}

static Block7Data*
block7_data_ref (Block7Data* _data7_)
{
	g_atomic_int_inc (&_data7_->_ref_count_);
	return _data7_;
}

static void
block7_data_unref (void * _userdata_)
{
	Block7Data* _data7_;
	_data7_ = (Block7Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data7_->_ref_count_)) {
		MailMainWindow* self;
		self = _data7_->self;
		_g_object_unref0 (_data7_->placeholder_stack);
		_g_object_unref0 (_data7_->message_overlay);
		_g_object_unref0 (self);
		g_slice_free (Block7Data, _data7_);
	}
}

static void
_mail_main_window___lambda100_ (MailMainWindow* self,
                                GtkWidget* widget)
{
	if (widget == NULL) {
		GApplication* _tmp0_;
		gchar** _tmp1_;
		gchar** _tmp2_;
		gint _tmp2__length1;
		_tmp0_ = g_application_get_default ();
		_tmp1_ = g_new0 (gchar*, 0 + 1);
		_tmp2_ = _tmp1_;
		_tmp2__length1 = 0;
		gtk_application_set_accels_for_action (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_application_get_type (), GtkApplication), MAIL_MAIN_WINDOW_ACTION_PREFIX MAIL_MAIN_WINDOW_ACTION_MOVE_TO_TRASH, _tmp2_);
		_tmp2_ = (_vala_array_free (_tmp2_, _tmp2__length1, (GDestroyNotify) g_free), NULL);
	} else {
		GApplication* _tmp3_;
		GeeMultiMap* _tmp4_;
		GeeCollection* _tmp5_;
		GeeCollection* _tmp6_;
		gint _tmp7_ = 0;
		gpointer* _tmp8_;
		gchar** _tmp9_;
		gint _tmp9__length1;
		_tmp3_ = g_application_get_default ();
		_tmp4_ = mail_main_window_action_accelerators;
		_tmp5_ = gee_multi_map_get (_tmp4_, MAIL_MAIN_WINDOW_ACTION_MOVE_TO_TRASH);
		_tmp6_ = _tmp5_;
		_tmp8_ = gee_collection_to_array (_tmp6_, &_tmp7_);
		_tmp9_ = _tmp8_;
		_tmp9__length1 = _tmp7_;
		gtk_application_set_accels_for_action (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, gtk_application_get_type (), GtkApplication), MAIL_MAIN_WINDOW_ACTION_PREFIX MAIL_MAIN_WINDOW_ACTION_MOVE_TO_TRASH, _tmp9_);
		_tmp9_ = (_vala_array_free (_tmp9_, _tmp9__length1, (GDestroyNotify) g_free), NULL);
		_g_object_unref0 (_tmp6_);
	}
}

static void
__mail_main_window___lambda100__gtk_container_set_focus_child (GtkContainer* _sender,
                                                               GtkWidget* child,
                                                               gpointer self)
{
	_mail_main_window___lambda100_ ((MailMainWindow*) self, child);
}

static void
_mail_main_window___lambda101_ (Block7Data* _data7_,
                                const gchar* label,
                                const gchar* url)
{
	MailMainWindow* self;
	gchar* _tmp0_ = NULL;
	gchar* hover_url = NULL;
	gchar* _tmp2_;
	const gchar* _tmp3_;
	self = _data7_->self;
	if (url != NULL) {
		gchar* _tmp1_;
		_tmp1_ = g_uri_unescape_string (url, NULL);
		_g_free0 (_tmp0_);
		_tmp0_ = _tmp1_;
	} else {
		_g_free0 (_tmp0_);
		_tmp0_ = NULL;
	}
	_tmp2_ = g_strdup (_tmp0_);
	hover_url = _tmp2_;
	_tmp3_ = hover_url;
	if (_tmp3_ == NULL) {
		GraniteWidgetsOverlayBar* _tmp4_;
		_tmp4_ = _data7_->message_overlay;
		gtk_widget_hide ((GtkWidget*) _tmp4_);
	} else {
		GraniteWidgetsOverlayBar* _tmp5_;
		const gchar* _tmp6_;
		GraniteWidgetsOverlayBar* _tmp7_;
		_tmp5_ = _data7_->message_overlay;
		_tmp6_ = hover_url;
		granite_widgets_overlay_bar_set_label (_tmp5_, _tmp6_);
		_tmp7_ = _data7_->message_overlay;
		gtk_widget_show ((GtkWidget*) _tmp7_);
	}
	_g_free0 (hover_url);
	_g_free0 (_tmp0_);
}

static void
__mail_main_window___lambda101__mail_message_list_box_hovering_over_link (MailMessageListBox* _sender,
                                                                          const gchar* label,
                                                                          const gchar* uri,
                                                                          gpointer self)
{
	_mail_main_window___lambda101_ (self, label, uri);
}

static void
_mail_main_window___lambda103_ (MailMainWindow* self)
{
	gtk_widget_destroy ((GtkWidget*) self);
}

static void
__mail_main_window___lambda103__gtk_widget_destroy (GtkWidget* _sender,
                                                    gpointer self)
{
	_mail_main_window___lambda103_ ((MailMainWindow*) self);
}

static void
_mail_main_window___lambda104_ (MailMainWindow* self,
                                GeeMap* folder_full_name_per_account)
{
	MailConversationListBox* _tmp0_;
	g_return_if_fail (folder_full_name_per_account != NULL);
	_tmp0_ = self->priv->conversation_list_box;
	mail_conversation_list_box_load_folder (_tmp0_, folder_full_name_per_account, NULL, NULL);
}

static void
__mail_main_window___lambda104__mail_folders_list_view_folder_selected (MailFoldersListView* _sender,
                                                                        GeeMap* folder_full_name_per_account,
                                                                        gpointer self)
{
	_mail_main_window___lambda104_ ((MailMainWindow*) self, folder_full_name_per_account);
}

static void
___lambda106_ (MailMainWindow* self,
               GObject* obj,
               GAsyncResult* res)
{
	MailMessageListBox* _tmp0_;
	g_return_if_fail (res != NULL);
	_tmp0_ = self->priv->message_list_box;
	mail_message_list_box_add_inline_composer_finish (_tmp0_, res);
	mail_main_window_scroll_message_list_to_bottom (self);
}

static void
____lambda106__gasync_ready_callback (GObject* source_object,
                                      GAsyncResult* res,
                                      gpointer self)
{
	___lambda106_ ((MailMainWindow*) self, source_object, res);
	g_object_unref (self);
}

static void
_mail_main_window___lambda105_ (MailMainWindow* self,
                                CamelFolderThreadNode* node)
{
	MailMessageListBox* _tmp0_;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	_tmp0_ = self->priv->message_list_box;
	mail_message_list_box_set_conversation (_tmp0_, node);
	if (node != NULL) {
		CamelMessageInfo* _tmp3_;
		_tmp3_ = node->message;
		_tmp2_ = _tmp3_ != NULL;
	} else {
		_tmp2_ = FALSE;
	}
	if (_tmp2_) {
		CamelMessageInfo* _tmp4_;
		CamelMessageFlags _tmp5_;
		CamelMessageFlags _tmp6_;
		_tmp4_ = node->message;
		g_object_get (_tmp4_, "flags", &_tmp5_, NULL);
		_tmp6_ = _tmp5_;
		_tmp1_ = (((gint) _tmp6_) & CAMEL_MESSAGE_DRAFT) == CAMEL_MESSAGE_DRAFT;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		MailMessageListBox* _tmp7_;
		_tmp7_ = self->priv->message_list_box;
		mail_message_list_box_add_inline_composer (_tmp7_, MAIL_COMPOSER_WIDGET_TYPE_DRAFT, NULL, ____lambda106__gasync_ready_callback, g_object_ref (self));
	}
}

static void
__mail_main_window___lambda105__mail_conversation_list_box_conversation_selected (MailConversationListBox* _sender,
                                                                                  CamelFolderThreadNode* node,
                                                                                  gpointer self)
{
	_mail_main_window___lambda105_ ((MailMainWindow*) self, node);
}

static void
_mail_main_window_on_filter_button_changed_g_object_notify (GObject* _sender,
                                                            GParamSpec* pspec,
                                                            gpointer self)
{
	mail_main_window_on_filter_button_changed ((MailMainWindow*) self);
}

static gchar*
string_strip (const gchar* self)
{
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* result;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_strdup (self);
	_result_ = _tmp0_;
	g_strstrip (_result_);
	result = _result_;
	return result;
}

static gboolean
__lambda108_ (MailMainWindow* self)
{
	gchar* search_term = NULL;
	GtkSearchEntry* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	const gchar* _tmp4_ = NULL;
	const gchar* _tmp5_;
	MailConversationListBox* _tmp7_;
	gboolean result;
	self->priv->search_changed_debounce_timeout_id = (guint) 0;
	_tmp0_ = self->priv->search_entry;
	_tmp1_ = gtk_entry_get_text ((GtkEntry*) _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = string_strip (_tmp2_);
	search_term = _tmp3_;
	_tmp5_ = search_term;
	if (g_strcmp0 (_tmp5_, "") == 0) {
		_tmp4_ = NULL;
	} else {
		const gchar* _tmp6_;
		_tmp6_ = search_term;
		_tmp4_ = _tmp6_;
	}
	_tmp7_ = self->priv->conversation_list_box;
	mail_conversation_list_box_search (_tmp7_, _tmp4_, FALSE, FALSE, NULL, NULL);
	result = G_SOURCE_REMOVE;
	_g_free0 (search_term);
	return result;
}

static gboolean
___lambda108__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda108_ ((MailMainWindow*) self);
	return result;
}

static void
_mail_main_window___lambda107_ (MailMainWindow* self)
{
	if (self->priv->search_changed_debounce_timeout_id != ((guint) 0)) {
		g_source_remove (self->priv->search_changed_debounce_timeout_id);
	}
	self->priv->search_changed_debounce_timeout_id = g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 800, ___lambda108__gsource_func, g_object_ref (self), g_object_unref);
}

static void
__mail_main_window___lambda107__gtk_search_entry_search_changed (GtkSearchEntry* _sender,
                                                                 gpointer self)
{
	_mail_main_window___lambda107_ ((MailMainWindow*) self);
}

static void
_mail_main_window___lambda109_ (Block7Data* _data7_)
{
	MailMainWindow* self;
	GeeLinkedList* accounts_left = NULL;
	MailBackendSession* _tmp0_;
	GeeLinkedList* _tmp1_;
	GeeLinkedList* _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	self = _data7_->self;
	_tmp0_ = _data7_->session;
	_tmp1_ = mail_backend_session_get_accounts (_tmp0_);
	accounts_left = _tmp1_;
	_tmp2_ = accounts_left;
	_tmp3_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp2_);
	_tmp4_ = _tmp3_;
	if (_tmp4_ == 0) {
		GSimpleAction* _tmp5_;
		GSimpleAction* _tmp6_;
		GtkSearchEntry* _tmp7_;
		_tmp5_ = mail_main_window_get_action (self, MAIL_MAIN_WINDOW_ACTION_COMPOSE_MESSAGE);
		_tmp6_ = _tmp5_;
		g_simple_action_set_enabled (_tmp6_, FALSE);
		_g_object_unref0 (_tmp6_);
		_tmp7_ = self->priv->search_entry;
		gtk_widget_set_sensitive ((GtkWidget*) _tmp7_, FALSE);
	}
	_g_object_unref0 (accounts_left);
}

static void
__mail_main_window___lambda109__mail_backend_session_account_removed (MailBackendSession* _sender,
                                                                      MailBackendAccount* account,
                                                                      gpointer self)
{
	_mail_main_window___lambda109_ (self);
}

static void
_mail_main_window___lambda110_ (Block7Data* _data7_,
                                GObject* obj,
                                GAsyncResult* res)
{
	MailMainWindow* self;
	MailBackendSession* _tmp0_;
	MailBackendSession* _tmp1_;
	GeeLinkedList* _tmp2_;
	GeeLinkedList* _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	gboolean _tmp6_;
	self = _data7_->self;
	g_return_if_fail (res != NULL);
	_tmp0_ = _data7_->session;
	mail_backend_session_start_finish (_tmp0_, res);
	_tmp1_ = _data7_->session;
	_tmp2_ = mail_backend_session_get_accounts (_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = _tmp5_ > 0;
	_g_object_unref0 (_tmp3_);
	if (_tmp6_) {
		GtkStack* _tmp7_;
		GtkPaned* _tmp8_;
		GSimpleAction* _tmp9_;
		GSimpleAction* _tmp10_;
		GtkSearchEntry* _tmp11_;
		_tmp7_ = _data7_->placeholder_stack;
		_tmp8_ = self->priv->paned_end;
		gtk_stack_set_visible_child (_tmp7_, (GtkWidget*) _tmp8_);
		_tmp9_ = mail_main_window_get_action (self, MAIL_MAIN_WINDOW_ACTION_COMPOSE_MESSAGE);
		_tmp10_ = _tmp9_;
		g_simple_action_set_enabled (_tmp10_, TRUE);
		_g_object_unref0 (_tmp10_);
		_tmp11_ = self->priv->search_entry;
		gtk_widget_set_sensitive ((GtkWidget*) _tmp11_, TRUE);
	}
	mail_main_window_set_is_session_started (self, TRUE);
	g_signal_emit (self, mail_main_window_signals[MAIL_MAIN_WINDOW_SESSION_STARTED_SIGNAL], 0);
}

static void
__mail_main_window___lambda110__gasync_ready_callback (GObject* source_object,
                                                       GAsyncResult* res,
                                                       gpointer self)
{
	_mail_main_window___lambda110_ (self, source_object, res);
	block7_data_unref (self);
}

static GObject *
mail_main_window_constructor (GType type,
                              guint n_construct_properties,
                              GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	MailMainWindow * self;
	Block7Data* _data7_;
	GSimpleAction* _tmp0_;
	GSimpleAction* _tmp1_;
	MailHeaderBar* _tmp21_;
	MailHeaderBar* _tmp22_;
	GtkStyleContext* _tmp23_;
	MailFoldersListView* _tmp24_;
	MailConversationListBox* _tmp25_;
	MailConversationListBox* _tmp26_;
	MailMessageListBox* _tmp27_;
	MailMessageListBox* _tmp28_;
	GSimpleAction* _tmp29_;
	GSimpleAction* _tmp30_;
	MailMessageListBox* _tmp31_;
	GSimpleAction* _tmp32_;
	GSimpleAction* _tmp33_;
	MailMessageListBox* _tmp34_;
	GSimpleAction* _tmp35_;
	GSimpleAction* _tmp36_;
	MailMessageListBox* _tmp37_;
	GSimpleAction* _tmp38_;
	GSimpleAction* _tmp39_;
	MailMessageListBox* _tmp40_;
	GSimpleAction* _tmp41_;
	GSimpleAction* _tmp42_;
	MailMessageListBox* _tmp43_;
	MailHeaderBar* _tmp44_;
	gchar* _tmp45_;
	GtkSearchEntry* _tmp46_ = NULL;
	HdyHeaderBar* search_header = NULL;
	HdyHeaderBar* _tmp47_;
	HdyHeaderBar* _tmp48_;
	GtkStyleContext* _tmp49_;
	HdyHeaderBar* _tmp50_;
	GtkSearchEntry* _tmp51_;
	GtkScrolledWindow* conversation_list_scrolled = NULL;
	GtkScrolledWindow* _tmp52_ = NULL;
	GtkScrolledWindow* _tmp53_;
	MailConversationListBox* _tmp54_;
	gchar* _tmp55_;
	GtkButton* _tmp56_ = NULL;
	GtkApplication* application_instance = NULL;
	GApplication* _tmp57_;
	GtkApplication* _tmp58_;
	GtkButton* _tmp59_;
	GtkApplication* _tmp60_;
	GtkButton* _tmp61_;
	const gchar* _tmp62_;
	const gchar* _tmp63_;
	gchar** _tmp64_;
	gchar** _tmp65_;
	gchar** _tmp66_;
	gint _tmp66__length1;
	gchar* _tmp67_;
	gchar* _tmp68_;
	gchar* _tmp69_;
	GtkSpinner* _tmp70_ = NULL;
	GtkStack* _tmp71_ = NULL;
	GtkStack* _tmp72_;
	GtkButton* _tmp73_;
	GtkStack* _tmp74_;
	GtkSpinner* _tmp75_;
	GtkStack* _tmp76_;
	GtkButton* _tmp77_;
	GraniteSwitchModelButton* _tmp78_;
	GraniteSwitchModelButton* _tmp79_;
	GtkGrid* filter_menu_popover_grid = NULL;
	GtkGrid* _tmp80_ = NULL;
	GtkGrid* _tmp81_;
	GraniteSwitchModelButton* _tmp82_;
	GtkGrid* _tmp83_;
	GraniteSwitchModelButton* _tmp84_;
	GtkGrid* _tmp85_;
	GtkPopover* filter_popover = NULL;
	GtkPopover* _tmp86_;
	GtkPopover* _tmp87_;
	GtkGrid* _tmp88_;
	GtkImage* _tmp89_;
	GtkPopover* _tmp90_;
	GtkPopover* _tmp91_;
	gchar* _tmp92_;
	GtkMenuButton* _tmp93_ = NULL;
	GtkActionBar* conversation_action_bar = NULL;
	GtkActionBar* _tmp94_;
	GtkActionBar* _tmp95_;
	GtkStack* _tmp96_;
	GtkActionBar* _tmp97_;
	GtkMenuButton* _tmp98_;
	GtkActionBar* _tmp99_;
	GtkStyleContext* _tmp100_;
	GtkGrid* conversation_list_grid = NULL;
	GtkGrid* _tmp101_;
	GtkGrid* _tmp102_;
	HdyHeaderBar* _tmp103_;
	GtkGrid* _tmp104_;
	GtkScrolledWindow* _tmp105_;
	GtkGrid* _tmp106_;
	GtkActionBar* _tmp107_;
	GtkGrid* _tmp108_;
	GtkStyleContext* _tmp109_;
	GtkScrolledWindow* _tmp110_;
	GtkScrolledWindow* _tmp111_;
	GtkScrolledWindow* _tmp112_;
	MailMessageListBox* _tmp113_;
	GtkWidget* scrolled_child = NULL;
	GtkScrolledWindow* _tmp114_;
	GtkWidget* _tmp115_;
	GtkWidget* _tmp116_;
	GtkWidget* _tmp117_;
	GtkOverlay* _tmp121_ = NULL;
	GtkOverlay* _tmp122_;
	GtkScrolledWindow* _tmp123_;
	GtkGrid* message_list_container = NULL;
	GtkGrid* _tmp124_;
	GtkGrid* _tmp125_;
	GtkStyleContext* _tmp126_;
	GtkGrid* _tmp127_;
	MailHeaderBar* _tmp128_;
	GtkGrid* _tmp129_;
	GtkOverlay* _tmp130_;
	GtkOverlay* _tmp131_;
	GraniteWidgetsOverlayBar* _tmp132_;
	GraniteWidgetsOverlayBar* _tmp133_;
	MailMessageListBox* _tmp134_;
	GtkPaned* _tmp135_;
	GtkPaned* _tmp136_;
	MailFoldersListView* _tmp137_;
	GtkPaned* _tmp138_;
	GtkGrid* _tmp139_;
	GtkPaned* _tmp140_;
	GtkPaned* _tmp141_;
	GtkPaned* _tmp142_;
	GtkPaned* _tmp143_;
	GtkGrid* _tmp144_;
	MailWelcomeView* welcome_view = NULL;
	MailWelcomeView* _tmp145_;
	GtkStack* _tmp146_;
	GtkStack* _tmp147_;
	GtkStack* _tmp148_;
	GtkPaned* _tmp149_;
	GtkStack* _tmp150_;
	MailWelcomeView* _tmp151_;
	GtkStack* _tmp152_;
	HdyHeaderGroup* header_group = NULL;
	HdyHeaderGroup* _tmp153_;
	HdyHeaderGroup* _tmp154_;
	MailFoldersListView* _tmp155_;
	HdyHeaderBar* _tmp156_;
	HdyHeaderBar* _tmp157_;
	HdyHeaderGroup* _tmp158_;
	HdyHeaderBar* _tmp159_;
	HdyHeaderGroup* _tmp160_;
	MailHeaderBar* _tmp161_;
	GtkSizeGroup* size_group = NULL;
	GtkSizeGroup* _tmp162_;
	GtkSizeGroup* _tmp163_;
	MailFoldersListView* _tmp164_;
	HdyHeaderBar* _tmp165_;
	HdyHeaderBar* _tmp166_;
	GtkSizeGroup* _tmp167_;
	HdyHeaderBar* _tmp168_;
	GtkSizeGroup* _tmp169_;
	MailHeaderBar* _tmp170_;
	GSettings* settings = NULL;
	GSettings* _tmp171_;
	GSettings* _tmp172_;
	GtkPaned* _tmp173_;
	GSettings* _tmp174_;
	GtkPaned* _tmp175_;
	MailFoldersListView* _tmp176_;
	MailConversationListBox* _tmp177_;
	GtkSearchEntry* _tmp178_;
	GtkMenuButton* _tmp179_;
	GraniteSwitchModelButton* _tmp180_;
	GraniteSwitchModelButton* _tmp181_;
	GtkSearchEntry* _tmp182_;
	MailBackendSession* _tmp183_;
	MailBackendSession* _tmp184_;
	MailBackendSession* _tmp185_;
	parent_class = G_OBJECT_CLASS (mail_main_window_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MAIL_TYPE_MAIN_WINDOW, MailMainWindow);
	_data7_ = g_slice_new0 (Block7Data);
	_data7_->_ref_count_ = 1;
	_data7_->self = g_object_ref (self);
	g_action_map_add_action_entries ((GActionMap*) self, MAIL_MAIN_WINDOW_ACTION_ENTRIES, (gint) G_N_ELEMENTS (MAIL_MAIN_WINDOW_ACTION_ENTRIES), self);
	_tmp0_ = mail_main_window_get_action (self, MAIL_MAIN_WINDOW_ACTION_COMPOSE_MESSAGE);
	_tmp1_ = _tmp0_;
	g_simple_action_set_enabled (_tmp1_, FALSE);
	_g_object_unref0 (_tmp1_);
	{
		GeeIterator* _action_it = NULL;
		GeeMultiMap* _tmp2_;
		GeeSet* _tmp3_;
		GeeSet* _tmp4_;
		GeeIterator* _tmp5_;
		GeeIterator* _tmp6_;
		_tmp2_ = mail_main_window_action_accelerators;
		_tmp3_ = gee_multi_map_get_keys (_tmp2_);
		_tmp4_ = _tmp3_;
		_tmp5_ = gee_iterable_iterator ((GeeIterable*) _tmp4_);
		_tmp6_ = _tmp5_;
		_g_object_unref0 (_tmp4_);
		_action_it = _tmp6_;
		while (TRUE) {
			GeeIterator* _tmp7_;
			gchar* action = NULL;
			GeeIterator* _tmp8_;
			gpointer _tmp9_;
			GApplication* _tmp10_;
			const gchar* _tmp11_;
			gchar* _tmp12_;
			gchar* _tmp13_;
			GeeMultiMap* _tmp14_;
			const gchar* _tmp15_;
			GeeCollection* _tmp16_;
			GeeCollection* _tmp17_;
			gint _tmp18_ = 0;
			gpointer* _tmp19_;
			gchar** _tmp20_;
			gint _tmp20__length1;
			_tmp7_ = _action_it;
			if (!gee_iterator_next (_tmp7_)) {
				break;
			}
			_tmp8_ = _action_it;
			_tmp9_ = gee_iterator_get (_tmp8_);
			action = (gchar*) _tmp9_;
			_tmp10_ = g_application_get_default ();
			_tmp11_ = action;
			_tmp12_ = g_strconcat (MAIL_MAIN_WINDOW_ACTION_PREFIX, _tmp11_, NULL);
			_tmp13_ = _tmp12_;
			_tmp14_ = mail_main_window_action_accelerators;
			_tmp15_ = action;
			_tmp16_ = gee_multi_map_get (_tmp14_, _tmp15_);
			_tmp17_ = _tmp16_;
			_tmp19_ = gee_collection_to_array (_tmp17_, &_tmp18_);
			_tmp20_ = _tmp19_;
			_tmp20__length1 = _tmp18_;
			gtk_application_set_accels_for_action (G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, gtk_application_get_type (), GtkApplication), _tmp13_, _tmp20_);
			_tmp20_ = (_vala_array_free (_tmp20_, _tmp20__length1, (GDestroyNotify) g_free), NULL);
			_g_object_unref0 (_tmp17_);
			_g_free0 (_tmp13_);
			_g_free0 (action);
		}
		_g_object_unref0 (_action_it);
	}
	_tmp21_ = mail_header_bar_new ();
	g_object_ref_sink (_tmp21_);
	_g_object_unref0 (self->priv->headerbar);
	self->priv->headerbar = _tmp21_;
	_tmp22_ = self->priv->headerbar;
	_tmp23_ = gtk_widget_get_style_context ((GtkWidget*) _tmp22_);
	gtk_style_context_add_class (_tmp23_, GTK_STYLE_CLASS_FLAT);
	_tmp24_ = mail_folders_list_view_new ();
	g_object_ref_sink (_tmp24_);
	_g_object_unref0 (self->priv->folders_list_view);
	self->priv->folders_list_view = _tmp24_;
	_tmp25_ = mail_conversation_list_box_new ();
	g_object_ref_sink (_tmp25_);
	_g_object_unref0 (self->priv->conversation_list_box);
	self->priv->conversation_list_box = _tmp25_;
	_tmp26_ = self->priv->conversation_list_box;
	g_signal_connect_object ((GtkContainer*) _tmp26_, "set-focus-child", (GCallback) __mail_main_window___lambda100__gtk_container_set_focus_child, self, 0);
	_tmp27_ = mail_message_list_box_new ();
	g_object_ref_sink (_tmp27_);
	_g_object_unref0 (self->priv->message_list_box);
	self->priv->message_list_box = _tmp27_;
	_tmp28_ = self->priv->message_list_box;
	_tmp29_ = mail_main_window_get_action (self, MAIL_MAIN_WINDOW_ACTION_REPLY);
	_tmp30_ = _tmp29_;
	g_object_bind_property_with_closures ((GObject*) _tmp28_, "can-reply", (GObject*) _tmp30_, "enabled", G_BINDING_SYNC_CREATE, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
	_g_object_unref0 (_tmp30_);
	_tmp31_ = self->priv->message_list_box;
	_tmp32_ = mail_main_window_get_action (self, MAIL_MAIN_WINDOW_ACTION_REPLY_ALL);
	_tmp33_ = _tmp32_;
	g_object_bind_property_with_closures ((GObject*) _tmp31_, "can-reply", (GObject*) _tmp33_, "enabled", G_BINDING_SYNC_CREATE, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
	_g_object_unref0 (_tmp33_);
	_tmp34_ = self->priv->message_list_box;
	_tmp35_ = mail_main_window_get_action (self, MAIL_MAIN_WINDOW_ACTION_FORWARD);
	_tmp36_ = _tmp35_;
	g_object_bind_property_with_closures ((GObject*) _tmp34_, "can-reply", (GObject*) _tmp36_, "enabled", G_BINDING_SYNC_CREATE, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
	_g_object_unref0 (_tmp36_);
	_tmp37_ = self->priv->message_list_box;
	_tmp38_ = mail_main_window_get_action (self, MAIL_MAIN_WINDOW_ACTION_MOVE_TO_TRASH);
	_tmp39_ = _tmp38_;
	g_object_bind_property_with_closures ((GObject*) _tmp37_, "can-move-thread", (GObject*) _tmp39_, "enabled", G_BINDING_SYNC_CREATE, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
	_g_object_unref0 (_tmp39_);
	_tmp40_ = self->priv->message_list_box;
	_tmp41_ = mail_main_window_get_action (self, MAIL_MAIN_WINDOW_ACTION_ARCHIVE);
	_tmp42_ = _tmp41_;
	g_object_bind_property_with_closures ((GObject*) _tmp40_, "can-move-thread", (GObject*) _tmp42_, "enabled", G_BINDING_SYNC_CREATE, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
	_g_object_unref0 (_tmp42_);
	_tmp43_ = self->priv->message_list_box;
	_tmp44_ = self->priv->headerbar;
	g_object_bind_property_with_closures ((GObject*) _tmp43_, "can-move-thread", (GObject*) _tmp44_, "can-mark", G_BINDING_SYNC_CREATE, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
	_tmp45_ = g_strdup (_ ("Search Mail"));
	_tmp46_ = (GtkSearchEntry*) gtk_search_entry_new ();
	gtk_widget_set_hexpand ((GtkWidget*) _tmp46_, TRUE);
	gtk_entry_set_placeholder_text ((GtkEntry*) _tmp46_, _tmp45_);
	_g_free0 (_tmp45_);
	gtk_widget_set_valign ((GtkWidget*) _tmp46_, GTK_ALIGN_CENTER);
	g_object_ref_sink (_tmp46_);
	_g_object_unref0 (self->priv->search_entry);
	self->priv->search_entry = _tmp46_;
	_tmp47_ = (HdyHeaderBar*) hdy_header_bar_new ();
	g_object_ref_sink (_tmp47_);
	search_header = _tmp47_;
	_tmp48_ = search_header;
	_tmp49_ = gtk_widget_get_style_context ((GtkWidget*) _tmp48_);
	gtk_style_context_add_class (_tmp49_, GTK_STYLE_CLASS_FLAT);
	_tmp50_ = search_header;
	_tmp51_ = self->priv->search_entry;
	hdy_header_bar_set_custom_title (_tmp50_, (GtkWidget*) _tmp51_);
	_tmp52_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_set (_tmp52_, "hscrollbar-policy", GTK_POLICY_NEVER, NULL);
	g_object_set ((GtkWidget*) _tmp52_, "width-request", 158, NULL);
	g_object_set ((GtkWidget*) _tmp52_, "expand", TRUE, NULL);
	g_object_ref_sink (_tmp52_);
	conversation_list_scrolled = _tmp52_;
	_tmp53_ = conversation_list_scrolled;
	_tmp54_ = self->priv->conversation_list_box;
	gtk_container_add ((GtkContainer*) _tmp53_, (GtkWidget*) _tmp54_);
	_tmp55_ = g_strdup (MAIL_MAIN_WINDOW_ACTION_PREFIX MAIL_MAIN_WINDOW_ACTION_REFRESH);
	_tmp56_ = (GtkButton*) gtk_button_new_from_icon_name ("view-refresh-symbolic", (GtkIconSize) GTK_ICON_SIZE_SMALL_TOOLBAR);
	gtk_actionable_set_action_name ((GtkActionable*) _tmp56_, _tmp55_);
	_g_free0 (_tmp55_);
	g_object_ref_sink (_tmp56_);
	_g_object_unref0 (self->priv->refresh_button);
	self->priv->refresh_button = _tmp56_;
	_tmp57_ = g_application_get_default ();
	_tmp58_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp57_, gtk_application_get_type (), GtkApplication));
	application_instance = _tmp58_;
	_tmp59_ = self->priv->refresh_button;
	_tmp60_ = application_instance;
	_tmp61_ = self->priv->refresh_button;
	_tmp62_ = gtk_actionable_get_action_name ((GtkActionable*) _tmp61_);
	_tmp63_ = _tmp62_;
	_tmp65_ = _tmp64_ = gtk_application_get_accels_for_action (_tmp60_, _tmp63_);
	_tmp66_ = _tmp65_;
	_tmp66__length1 = _vala_array_length (_tmp64_);
	_tmp67_ = granite_markup_accel_tooltip (_tmp66_, (gint) _vala_array_length (_tmp64_), _ ("Fetch new messages"));
	_tmp68_ = _tmp67_;
	gtk_widget_set_tooltip_markup ((GtkWidget*) _tmp59_, _tmp68_);
	_g_free0 (_tmp68_);
	_tmp66_ = (_vala_array_free (_tmp66_, _tmp66__length1, (GDestroyNotify) g_free), NULL);
	_tmp69_ = g_strdup (_ ("Fetching new messages"));
	_tmp70_ = (GtkSpinner*) gtk_spinner_new ();
	g_object_set (_tmp70_, "active", TRUE, NULL);
	gtk_widget_set_halign ((GtkWidget*) _tmp70_, GTK_ALIGN_CENTER);
	gtk_widget_set_valign ((GtkWidget*) _tmp70_, GTK_ALIGN_CENTER);
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp70_, _tmp69_);
	_g_free0 (_tmp69_);
	g_object_ref_sink (_tmp70_);
	_g_object_unref0 (self->priv->refresh_spinner);
	self->priv->refresh_spinner = _tmp70_;
	_tmp71_ = (GtkStack*) gtk_stack_new ();
	gtk_stack_set_transition_type (_tmp71_, GTK_STACK_TRANSITION_TYPE_CROSSFADE);
	g_object_ref_sink (_tmp71_);
	_g_object_unref0 (self->priv->refresh_stack);
	self->priv->refresh_stack = _tmp71_;
	_tmp72_ = self->priv->refresh_stack;
	_tmp73_ = self->priv->refresh_button;
	gtk_container_add ((GtkContainer*) _tmp72_, (GtkWidget*) _tmp73_);
	_tmp74_ = self->priv->refresh_stack;
	_tmp75_ = self->priv->refresh_spinner;
	gtk_container_add ((GtkContainer*) _tmp74_, (GtkWidget*) _tmp75_);
	_tmp76_ = self->priv->refresh_stack;
	_tmp77_ = self->priv->refresh_button;
	gtk_stack_set_visible_child (_tmp76_, (GtkWidget*) _tmp77_);
	_tmp78_ = granite_switch_model_button_new (_ ("Hide read conversations"));
	g_object_ref_sink (_tmp78_);
	_g_object_unref0 (self->priv->hide_read_switch);
	self->priv->hide_read_switch = _tmp78_;
	_tmp79_ = granite_switch_model_button_new (_ ("Hide unstarred conversations"));
	g_object_ref_sink (_tmp79_);
	_g_object_unref0 (self->priv->hide_unstarred_switch);
	self->priv->hide_unstarred_switch = _tmp79_;
	_tmp80_ = (GtkGrid*) gtk_grid_new ();
	gtk_widget_set_margin_bottom ((GtkWidget*) _tmp80_, 3);
	gtk_widget_set_margin_top ((GtkWidget*) _tmp80_, 3);
	gtk_orientable_set_orientation ((GtkOrientable*) _tmp80_, GTK_ORIENTATION_VERTICAL);
	g_object_ref_sink (_tmp80_);
	filter_menu_popover_grid = _tmp80_;
	_tmp81_ = filter_menu_popover_grid;
	_tmp82_ = self->priv->hide_read_switch;
	gtk_container_add ((GtkContainer*) _tmp81_, (GtkWidget*) _tmp82_);
	_tmp83_ = filter_menu_popover_grid;
	_tmp84_ = self->priv->hide_unstarred_switch;
	gtk_container_add ((GtkContainer*) _tmp83_, (GtkWidget*) _tmp84_);
	_tmp85_ = filter_menu_popover_grid;
	gtk_widget_show_all ((GtkWidget*) _tmp85_);
	_tmp86_ = (GtkPopover*) gtk_popover_new (NULL);
	g_object_ref_sink (_tmp86_);
	filter_popover = _tmp86_;
	_tmp87_ = filter_popover;
	_tmp88_ = filter_menu_popover_grid;
	gtk_container_add ((GtkContainer*) _tmp87_, (GtkWidget*) _tmp88_);
	_tmp89_ = (GtkImage*) gtk_image_new_from_icon_name ("mail-filter-symbolic", (GtkIconSize) GTK_ICON_SIZE_SMALL_TOOLBAR);
	g_object_ref_sink (_tmp89_);
	_tmp90_ = filter_popover;
	_tmp91_ = _g_object_ref0 (_tmp90_);
	_tmp92_ = g_strdup (_ ("Filter Conversations"));
	_tmp93_ = (GtkMenuButton*) gtk_menu_button_new ();
	gtk_button_set_image ((GtkButton*) _tmp93_, (GtkWidget*) _tmp89_);
	_g_object_unref0 (_tmp89_);
	gtk_menu_button_set_popover (_tmp93_, _tmp91_);
	_g_object_unref0 (_tmp91_);
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp93_, _tmp92_);
	_g_free0 (_tmp92_);
	g_object_ref_sink (_tmp93_);
	_g_object_unref0 (self->priv->filter_button);
	self->priv->filter_button = _tmp93_;
	_tmp94_ = (GtkActionBar*) gtk_action_bar_new ();
	g_object_ref_sink (_tmp94_);
	conversation_action_bar = _tmp94_;
	_tmp95_ = conversation_action_bar;
	_tmp96_ = self->priv->refresh_stack;
	gtk_action_bar_pack_start (_tmp95_, (GtkWidget*) _tmp96_);
	_tmp97_ = conversation_action_bar;
	_tmp98_ = self->priv->filter_button;
	gtk_action_bar_pack_end (_tmp97_, (GtkWidget*) _tmp98_);
	_tmp99_ = conversation_action_bar;
	_tmp100_ = gtk_widget_get_style_context ((GtkWidget*) _tmp99_);
	gtk_style_context_add_class (_tmp100_, GTK_STYLE_CLASS_FLAT);
	_tmp101_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp101_);
	conversation_list_grid = _tmp101_;
	_tmp102_ = conversation_list_grid;
	_tmp103_ = search_header;
	gtk_grid_attach (_tmp102_, (GtkWidget*) _tmp103_, 0, 0, 1, 1);
	_tmp104_ = conversation_list_grid;
	_tmp105_ = conversation_list_scrolled;
	gtk_grid_attach (_tmp104_, (GtkWidget*) _tmp105_, 0, 1, 1, 1);
	_tmp106_ = conversation_list_grid;
	_tmp107_ = conversation_action_bar;
	gtk_grid_attach (_tmp106_, (GtkWidget*) _tmp107_, 0, 2, 1, 1);
	_tmp108_ = conversation_list_grid;
	_tmp109_ = gtk_widget_get_style_context ((GtkWidget*) _tmp108_);
	gtk_style_context_add_class (_tmp109_, GTK_STYLE_CLASS_VIEW);
	_tmp110_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp110_);
	_g_object_unref0 (self->priv->message_list_scrolled);
	self->priv->message_list_scrolled = _tmp110_;
	_tmp111_ = self->priv->message_list_scrolled;
	g_object_set (_tmp111_, "hscrollbar-policy", GTK_POLICY_NEVER, NULL);
	_tmp112_ = self->priv->message_list_scrolled;
	_tmp113_ = self->priv->message_list_box;
	gtk_container_add ((GtkContainer*) _tmp112_, (GtkWidget*) _tmp113_);
	_tmp114_ = self->priv->message_list_scrolled;
	_tmp115_ = gtk_bin_get_child ((GtkBin*) _tmp114_);
	_tmp116_ = _g_object_ref0 (_tmp115_);
	scrolled_child = _tmp116_;
	_tmp117_ = scrolled_child;
	if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp117_, gtk_container_get_type ())) {
		GtkWidget* _tmp118_;
		GtkAdjustment* _tmp119_;
		GtkAdjustment* _tmp120_;
		_tmp118_ = scrolled_child;
		_tmp119_ = gtk_adjustment_new ((gdouble) 0, (gdouble) 0, (gdouble) 0, (gdouble) 0, (gdouble) 0, (gdouble) 0);
		g_object_ref_sink (_tmp119_);
		_tmp120_ = _tmp119_;
		gtk_container_set_focus_vadjustment (G_TYPE_CHECK_INSTANCE_CAST (_tmp118_, gtk_container_get_type (), GtkContainer), _tmp120_);
		_g_object_unref0 (_tmp120_);
	}
	_tmp121_ = (GtkOverlay*) gtk_overlay_new ();
	g_object_set ((GtkWidget*) _tmp121_, "expand", TRUE, NULL);
	g_object_ref_sink (_tmp121_);
	_g_object_unref0 (self->priv->view_overlay);
	self->priv->view_overlay = _tmp121_;
	_tmp122_ = self->priv->view_overlay;
	_tmp123_ = self->priv->message_list_scrolled;
	gtk_container_add ((GtkContainer*) _tmp122_, (GtkWidget*) _tmp123_);
	_tmp124_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp124_);
	message_list_container = _tmp124_;
	_tmp125_ = message_list_container;
	_tmp126_ = gtk_widget_get_style_context ((GtkWidget*) _tmp125_);
	gtk_style_context_add_class (_tmp126_, GTK_STYLE_CLASS_BACKGROUND);
	_tmp127_ = message_list_container;
	_tmp128_ = self->priv->headerbar;
	gtk_grid_attach (_tmp127_, (GtkWidget*) _tmp128_, 0, 0, 1, 1);
	_tmp129_ = message_list_container;
	_tmp130_ = self->priv->view_overlay;
	gtk_grid_attach (_tmp129_, (GtkWidget*) _tmp130_, 0, 1, 1, 1);
	_tmp131_ = self->priv->view_overlay;
	_tmp132_ = granite_widgets_overlay_bar_new (_tmp131_);
	g_object_ref_sink (_tmp132_);
	_data7_->message_overlay = _tmp132_;
	_tmp133_ = _data7_->message_overlay;
	gtk_widget_set_no_show_all ((GtkWidget*) _tmp133_, TRUE);
	_tmp134_ = self->priv->message_list_box;
	g_signal_connect_data (_tmp134_, "hovering-over-link", (GCallback) __mail_main_window___lambda101__mail_message_list_box_hovering_over_link, block7_data_ref (_data7_), (GClosureNotify) block7_data_unref, 0);
	_tmp135_ = (GtkPaned*) gtk_paned_new (GTK_ORIENTATION_HORIZONTAL);
	g_object_ref_sink (_tmp135_);
	_g_object_unref0 (self->priv->paned_start);
	self->priv->paned_start = _tmp135_;
	_tmp136_ = self->priv->paned_start;
	_tmp137_ = self->priv->folders_list_view;
	gtk_paned_pack1 (_tmp136_, (GtkWidget*) _tmp137_, FALSE, FALSE);
	_tmp138_ = self->priv->paned_start;
	_tmp139_ = conversation_list_grid;
	gtk_paned_pack2 (_tmp138_, (GtkWidget*) _tmp139_, TRUE, FALSE);
	_tmp140_ = (GtkPaned*) gtk_paned_new (GTK_ORIENTATION_HORIZONTAL);
	g_object_ref_sink (_tmp140_);
	_g_object_unref0 (self->priv->paned_end);
	self->priv->paned_end = _tmp140_;
	_tmp141_ = self->priv->paned_end;
	_tmp142_ = self->priv->paned_start;
	gtk_paned_pack1 (_tmp141_, (GtkWidget*) _tmp142_, FALSE, FALSE);
	_tmp143_ = self->priv->paned_end;
	_tmp144_ = message_list_container;
	gtk_paned_pack2 (_tmp143_, (GtkWidget*) _tmp144_, TRUE, TRUE);
	_tmp145_ = mail_welcome_view_new ();
	g_object_ref_sink (_tmp145_);
	welcome_view = _tmp145_;
	_tmp146_ = (GtkStack*) gtk_stack_new ();
	g_object_ref_sink (_tmp146_);
	_data7_->placeholder_stack = _tmp146_;
	_tmp147_ = _data7_->placeholder_stack;
	gtk_stack_set_transition_type (_tmp147_, GTK_STACK_TRANSITION_TYPE_OVER_DOWN_UP);
	_tmp148_ = _data7_->placeholder_stack;
	_tmp149_ = self->priv->paned_end;
	gtk_stack_add_named (_tmp148_, (GtkWidget*) _tmp149_, "mail");
	_tmp150_ = _data7_->placeholder_stack;
	_tmp151_ = welcome_view;
	gtk_stack_add_named (_tmp150_, (GtkWidget*) _tmp151_, "welcome");
	_tmp152_ = _data7_->placeholder_stack;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp152_);
	_tmp153_ = hdy_header_group_new ();
	header_group = _tmp153_;
	_tmp154_ = header_group;
	_tmp155_ = self->priv->folders_list_view;
	_tmp156_ = mail_folders_list_view_get_header_bar (_tmp155_);
	_tmp157_ = _tmp156_;
	hdy_header_group_add_header_bar (_tmp154_, _tmp157_);
	_tmp158_ = header_group;
	_tmp159_ = search_header;
	hdy_header_group_add_header_bar (_tmp158_, _tmp159_);
	_tmp160_ = header_group;
	_tmp161_ = self->priv->headerbar;
	hdy_header_group_add_header_bar (_tmp160_, (HdyHeaderBar*) _tmp161_);
	_tmp162_ = gtk_size_group_new (GTK_SIZE_GROUP_VERTICAL);
	size_group = _tmp162_;
	_tmp163_ = size_group;
	_tmp164_ = self->priv->folders_list_view;
	_tmp165_ = mail_folders_list_view_get_header_bar (_tmp164_);
	_tmp166_ = _tmp165_;
	gtk_size_group_add_widget (_tmp163_, (GtkWidget*) _tmp166_);
	_tmp167_ = size_group;
	_tmp168_ = search_header;
	gtk_size_group_add_widget (_tmp167_, (GtkWidget*) _tmp168_);
	_tmp169_ = size_group;
	_tmp170_ = self->priv->headerbar;
	gtk_size_group_add_widget (_tmp169_, (GtkWidget*) _tmp170_);
	_tmp171_ = g_settings_new ("io.elementary.mail");
	settings = _tmp171_;
	_tmp172_ = settings;
	_tmp173_ = self->priv->paned_start;
	g_settings_bind (_tmp172_, "paned-start-position", (GObject*) _tmp173_, "position", G_SETTINGS_BIND_DEFAULT);
	_tmp174_ = settings;
	_tmp175_ = self->priv->paned_end;
	g_settings_bind (_tmp174_, "paned-end-position", (GObject*) _tmp175_, "position", G_SETTINGS_BIND_DEFAULT);
	g_signal_connect_object ((GtkWidget*) self, "destroy", (GCallback) __mail_main_window___lambda103__gtk_widget_destroy, self, 0);
	_tmp176_ = self->priv->folders_list_view;
	g_signal_connect_object (_tmp176_, "folder-selected", (GCallback) __mail_main_window___lambda104__mail_folders_list_view_folder_selected, self, 0);
	_tmp177_ = self->priv->conversation_list_box;
	g_signal_connect_object (_tmp177_, "conversation-selected", (GCallback) __mail_main_window___lambda105__mail_conversation_list_box_conversation_selected, self, 0);
	_tmp178_ = self->priv->search_entry;
	_tmp179_ = self->priv->filter_button;
	g_object_bind_property_with_closures ((GObject*) _tmp178_, "sensitive", (GObject*) _tmp179_, "sensitive", G_BINDING_SYNC_CREATE, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
	_tmp180_ = self->priv->hide_read_switch;
	g_signal_connect_object ((GObject*) _tmp180_, "notify::active", (GCallback) _mail_main_window_on_filter_button_changed_g_object_notify, self, 0);
	_tmp181_ = self->priv->hide_unstarred_switch;
	g_signal_connect_object ((GObject*) _tmp181_, "notify::active", (GCallback) _mail_main_window_on_filter_button_changed_g_object_notify, self, 0);
	_tmp182_ = self->priv->search_entry;
	g_signal_connect_object (_tmp182_, "search-changed", (GCallback) __mail_main_window___lambda107__gtk_search_entry_search_changed, self, 0);
	_tmp183_ = mail_backend_session_get_default ();
	_data7_->session = _tmp183_;
	_tmp184_ = _data7_->session;
	g_signal_connect_data (_tmp184_, "account-removed", (GCallback) __mail_main_window___lambda109__mail_backend_session_account_removed, block7_data_ref (_data7_), (GClosureNotify) block7_data_unref, 0);
	_tmp185_ = _data7_->session;
	mail_backend_session_start (_tmp185_, __mail_main_window___lambda110__gasync_ready_callback, block7_data_ref (_data7_));
	_g_object_unref0 (settings);
	_g_object_unref0 (size_group);
	_g_object_unref0 (header_group);
	_g_object_unref0 (welcome_view);
	_g_object_unref0 (message_list_container);
	_g_object_unref0 (scrolled_child);
	_g_object_unref0 (conversation_list_grid);
	_g_object_unref0 (conversation_action_bar);
	_g_object_unref0 (filter_popover);
	_g_object_unref0 (filter_menu_popover_grid);
	_g_object_unref0 (application_instance);
	_g_object_unref0 (conversation_list_scrolled);
	_g_object_unref0 (search_header);
	block7_data_unref (_data7_);
	_data7_ = NULL;
	return obj;
}

static void
mail_main_window_class_init (MailMainWindowClass * klass,
                             gpointer klass_data)
{
	GeeHashMultiMap* _tmp0_;
	GeeMultiMap* _tmp1_;
	GeeMultiMap* _tmp2_;
	GeeMultiMap* _tmp3_;
	GeeMultiMap* _tmp4_;
	GeeMultiMap* _tmp5_;
	GeeMultiMap* _tmp6_;
	GeeMultiMap* _tmp7_;
	GeeMultiMap* _tmp8_;
	GeeMultiMap* _tmp9_;
	GeeMultiMap* _tmp10_;
	GeeMultiMap* _tmp11_;
	GeeMultiMap* _tmp12_;
	GeeMultiMap* _tmp13_;
	mail_main_window_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &MailMainWindow_private_offset);
	((GtkWidgetClass *) klass)->configure_event = (gboolean (*) (GtkWidget*, GdkEventConfigure*)) mail_main_window_real_configure_event;
	G_OBJECT_CLASS (klass)->get_property = _vala_mail_main_window_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_mail_main_window_set_property;
	G_OBJECT_CLASS (klass)->constructor = mail_main_window_constructor;
	G_OBJECT_CLASS (klass)->finalize = mail_main_window_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), MAIL_MAIN_WINDOW_IS_SESSION_STARTED_PROPERTY, mail_main_window_properties[MAIL_MAIN_WINDOW_IS_SESSION_STARTED_PROPERTY] = g_param_spec_boolean ("is-session-started", "is-session-started", "is-session-started", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
	mail_main_window_signals[MAIL_MAIN_WINDOW_SESSION_STARTED_SIGNAL] = g_signal_new ("session-started", MAIL_TYPE_MAIN_WINDOW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	_tmp0_ = gee_hash_multi_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	mail_main_window_action_accelerators = (GeeMultiMap*) _tmp0_;
	hdy_init ();
	_tmp1_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp1_, MAIL_MAIN_WINDOW_ACTION_COMPOSE_MESSAGE, "<Control>N");
	_tmp2_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp2_, MAIL_MAIN_WINDOW_ACTION_REFRESH, "F12");
	_tmp3_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp3_, MAIL_MAIN_WINDOW_ACTION_REPLY, "<Control>R");
	_tmp4_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp4_, MAIL_MAIN_WINDOW_ACTION_REPLY_ALL, "<Control><Shift>R");
	_tmp5_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp5_, MAIL_MAIN_WINDOW_ACTION_FORWARD, "<Ctrl><Shift>F");
	_tmp6_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp6_, MAIL_MAIN_WINDOW_ACTION_MARK_READ, "<Ctrl><Shift>i");
	_tmp7_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp7_, MAIL_MAIN_WINDOW_ACTION_MARK_STAR, "<Ctrl>l");
	_tmp8_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp8_, MAIL_MAIN_WINDOW_ACTION_MARK_UNREAD, "<Ctrl><Shift>u");
	_tmp9_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp9_, MAIL_MAIN_WINDOW_ACTION_MARK_UNSTAR, "<Ctrl><Shift>l");
	_tmp10_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp10_, MAIL_MAIN_WINDOW_ACTION_ARCHIVE, "<Ctrl><Shift>a");
	_tmp11_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp11_, MAIL_MAIN_WINDOW_ACTION_MOVE_TO_TRASH, "Delete");
	_tmp12_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp12_, MAIL_MAIN_WINDOW_ACTION_MOVE_TO_TRASH, "BackSpace");
	_tmp13_ = mail_main_window_action_accelerators;
	gee_multi_map_set (_tmp13_, MAIL_MAIN_WINDOW_ACTION_FULLSCREEN, "F11");
}

static void
mail_main_window_instance_init (MailMainWindow * self,
                                gpointer klass)
{
	self->priv = mail_main_window_get_instance_private (self);
	self->priv->search_changed_debounce_timeout_id = (guint) 0;
	self->priv->_is_session_started = FALSE;
}

static void
mail_main_window_finalize (GObject * obj)
{
	MailMainWindow * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MAIL_TYPE_MAIN_WINDOW, MailMainWindow);
	_g_object_unref0 (self->priv->headerbar);
	_g_object_unref0 (self->priv->search_entry);
	_g_object_unref0 (self->priv->paned_end);
	_g_object_unref0 (self->priv->paned_start);
	_g_object_unref0 (self->priv->folders_list_view);
	_g_object_unref0 (self->priv->view_overlay);
	_g_object_unref0 (self->priv->conversation_list_box);
	_g_object_unref0 (self->priv->message_list_box);
	_g_object_unref0 (self->priv->hide_read_switch);
	_g_object_unref0 (self->priv->hide_unstarred_switch);
	_g_object_unref0 (self->priv->refresh_button);
	_g_object_unref0 (self->priv->filter_button);
	_g_object_unref0 (self->priv->message_list_scrolled);
	_g_object_unref0 (self->priv->refresh_spinner);
	_g_object_unref0 (self->priv->refresh_stack);
	G_OBJECT_CLASS (mail_main_window_parent_class)->finalize (obj);
}

static GType
mail_main_window_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (MailMainWindowClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) mail_main_window_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MailMainWindow), 0, (GInstanceInitFunc) mail_main_window_instance_init, NULL };
	GType mail_main_window_type_id;
	mail_main_window_type_id = g_type_register_static (hdy_application_window_get_type (), "MailMainWindow", &g_define_type_info, 0);
	MailMainWindow_private_offset = g_type_add_instance_private (mail_main_window_type_id, sizeof (MailMainWindowPrivate));
	return mail_main_window_type_id;
}

GType
mail_main_window_get_type (void)
{
	static volatile gsize mail_main_window_type_id__once = 0;
	if (g_once_init_enter (&mail_main_window_type_id__once)) {
		GType mail_main_window_type_id;
		mail_main_window_type_id = mail_main_window_get_type_once ();
		g_once_init_leave (&mail_main_window_type_id__once, mail_main_window_type_id);
	}
	return mail_main_window_type_id__once;
}

static void
_vala_mail_main_window_get_property (GObject * object,
                                     guint property_id,
                                     GValue * value,
                                     GParamSpec * pspec)
{
	MailMainWindow * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MAIL_TYPE_MAIN_WINDOW, MailMainWindow);
	switch (property_id) {
		case MAIL_MAIN_WINDOW_IS_SESSION_STARTED_PROPERTY:
		g_value_set_boolean (value, mail_main_window_get_is_session_started (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}

static void
_vala_mail_main_window_set_property (GObject * object,
                                     guint property_id,
                                     const GValue * value,
                                     GParamSpec * pspec)
{
	MailMainWindow * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MAIL_TYPE_MAIN_WINDOW, MailMainWindow);
	switch (property_id) {
		case MAIL_MAIN_WINDOW_IS_SESSION_STARTED_PROPERTY:
		mail_main_window_set_is_session_started (self, g_value_get_boolean (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}

static void
_vala_array_destroy (gpointer array,
                     gssize array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gssize i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gssize array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

static gssize
_vala_array_length (gpointer array)
{
	gssize length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}

