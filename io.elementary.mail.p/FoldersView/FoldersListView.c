/* FoldersListView.c generated by valac 0.56.3, the Vala compiler
 * generated from FoldersListView.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/*-
 * Copyright (c) 2017 elementary LLC. (https://elementary.io)
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 3 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the
 * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
 * Boston, MA 02111-1307, USA.
 *
 * Authored by: Corentin NoÃ«l <corentin@elementary.io>
 */

#include <gtk/gtk.h>
#include <glib-object.h>
#include <handy.h>
#include <granite.h>
#include <gio/gio.h>
#include <glib.h>
#include <stdlib.h>
#include <string.h>
#include <camel/camel.h>
#include <gee.h>
#include <glib/gi18n-lib.h>

#define MAIL_MAIN_WINDOW_ACTION_GROUP_PREFIX "win"
#define MAIL_MAIN_WINDOW_ACTION_PREFIX MAIL_MAIN_WINDOW_ACTION_GROUP_PREFIX "."
#define MAIL_MAIN_WINDOW_ACTION_COMPOSE_MESSAGE "compose_message"
#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define MAIL_TYPE_FOLDERS_LIST_VIEW (mail_folders_list_view_get_type ())
#define MAIL_FOLDERS_LIST_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListView))
#define MAIL_FOLDERS_LIST_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListViewClass))
#define MAIL_IS_FOLDERS_LIST_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_FOLDERS_LIST_VIEW))
#define MAIL_IS_FOLDERS_LIST_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_FOLDERS_LIST_VIEW))
#define MAIL_FOLDERS_LIST_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListViewClass))

typedef struct _MailFoldersListView MailFoldersListView;
typedef struct _MailFoldersListViewClass MailFoldersListViewClass;
typedef struct _MailFoldersListViewPrivate MailFoldersListViewPrivate;

#define MAIL_TYPE_SESSION_SOURCE_ITEM (mail_session_source_item_get_type ())
#define MAIL_SESSION_SOURCE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_SESSION_SOURCE_ITEM, MailSessionSourceItem))
#define MAIL_SESSION_SOURCE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_SESSION_SOURCE_ITEM, MailSessionSourceItemClass))
#define MAIL_IS_SESSION_SOURCE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_SESSION_SOURCE_ITEM))
#define MAIL_IS_SESSION_SOURCE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_SESSION_SOURCE_ITEM))
#define MAIL_SESSION_SOURCE_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_SESSION_SOURCE_ITEM, MailSessionSourceItemClass))

typedef struct _MailSessionSourceItem MailSessionSourceItem;
typedef struct _MailSessionSourceItemClass MailSessionSourceItemClass;
enum  {
	MAIL_FOLDERS_LIST_VIEW_0_PROPERTY,
	MAIL_FOLDERS_LIST_VIEW_HEADER_BAR_PROPERTY,
	MAIL_FOLDERS_LIST_VIEW_NUM_PROPERTIES
};
static GParamSpec* mail_folders_list_view_properties[MAIL_FOLDERS_LIST_VIEW_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define MAIL_BACKEND_TYPE_ACCOUNT (mail_backend_account_get_type ())
#define MAIL_BACKEND_ACCOUNT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_BACKEND_TYPE_ACCOUNT, MailBackendAccount))
#define MAIL_BACKEND_ACCOUNT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_BACKEND_TYPE_ACCOUNT, MailBackendAccountClass))
#define MAIL_BACKEND_IS_ACCOUNT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_BACKEND_TYPE_ACCOUNT))
#define MAIL_BACKEND_IS_ACCOUNT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_BACKEND_TYPE_ACCOUNT))
#define MAIL_BACKEND_ACCOUNT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_BACKEND_TYPE_ACCOUNT, MailBackendAccountClass))

typedef struct _MailBackendAccount MailBackendAccount;
typedef struct _MailBackendAccountClass MailBackendAccountClass;

#define MAIL_TYPE_ACCOUNT_SOURCE_ITEM (mail_account_source_item_get_type ())
#define MAIL_ACCOUNT_SOURCE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_ACCOUNT_SOURCE_ITEM, MailAccountSourceItem))
#define MAIL_ACCOUNT_SOURCE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_ACCOUNT_SOURCE_ITEM, MailAccountSourceItemClass))
#define MAIL_IS_ACCOUNT_SOURCE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_ACCOUNT_SOURCE_ITEM))
#define MAIL_IS_ACCOUNT_SOURCE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_ACCOUNT_SOURCE_ITEM))
#define MAIL_ACCOUNT_SOURCE_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_ACCOUNT_SOURCE_ITEM, MailAccountSourceItemClass))

typedef struct _MailAccountSourceItem MailAccountSourceItem;
typedef struct _MailAccountSourceItemClass MailAccountSourceItemClass;
typedef struct _Block27Data Block27Data;
#define _g_free0(var) (var = (g_free (var), NULL))

#define MAIL_TYPE_FOLDER_SOURCE_ITEM (mail_folder_source_item_get_type ())
#define MAIL_FOLDER_SOURCE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_FOLDER_SOURCE_ITEM, MailFolderSourceItem))
#define MAIL_FOLDER_SOURCE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_FOLDER_SOURCE_ITEM, MailFolderSourceItemClass))
#define MAIL_IS_FOLDER_SOURCE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_FOLDER_SOURCE_ITEM))
#define MAIL_IS_FOLDER_SOURCE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_FOLDER_SOURCE_ITEM))
#define MAIL_FOLDER_SOURCE_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_FOLDER_SOURCE_ITEM, MailFolderSourceItemClass))

typedef struct _MailFolderSourceItem MailFolderSourceItem;
typedef struct _MailFolderSourceItemClass MailFolderSourceItemClass;
typedef struct _MailFolderSourceItemPrivate MailFolderSourceItemPrivate;

#define MAIL_TYPE_GROUPED_FOLDER_SOURCE_ITEM (mail_grouped_folder_source_item_get_type ())
#define MAIL_GROUPED_FOLDER_SOURCE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_TYPE_GROUPED_FOLDER_SOURCE_ITEM, MailGroupedFolderSourceItem))
#define MAIL_GROUPED_FOLDER_SOURCE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_TYPE_GROUPED_FOLDER_SOURCE_ITEM, MailGroupedFolderSourceItemClass))
#define MAIL_IS_GROUPED_FOLDER_SOURCE_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_TYPE_GROUPED_FOLDER_SOURCE_ITEM))
#define MAIL_IS_GROUPED_FOLDER_SOURCE_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_TYPE_GROUPED_FOLDER_SOURCE_ITEM))
#define MAIL_GROUPED_FOLDER_SOURCE_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_TYPE_GROUPED_FOLDER_SOURCE_ITEM, MailGroupedFolderSourceItemClass))

typedef struct _MailGroupedFolderSourceItem MailGroupedFolderSourceItem;
typedef struct _MailGroupedFolderSourceItemClass MailGroupedFolderSourceItemClass;

#define MAIL_BACKEND_TYPE_SESSION (mail_backend_session_get_type ())
#define MAIL_BACKEND_SESSION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MAIL_BACKEND_TYPE_SESSION, MailBackendSession))
#define MAIL_BACKEND_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MAIL_BACKEND_TYPE_SESSION, MailBackendSessionClass))
#define MAIL_BACKEND_IS_SESSION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MAIL_BACKEND_TYPE_SESSION))
#define MAIL_BACKEND_IS_SESSION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MAIL_BACKEND_TYPE_SESSION))
#define MAIL_BACKEND_SESSION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MAIL_BACKEND_TYPE_SESSION, MailBackendSessionClass))

typedef struct _MailBackendSession MailBackendSession;
typedef struct _MailBackendSessionClass MailBackendSessionClass;
enum  {
	MAIL_FOLDERS_LIST_VIEW_FOLDER_SELECTED_SIGNAL,
	MAIL_FOLDERS_LIST_VIEW_NUM_SIGNALS
};
static guint mail_folders_list_view_signals[MAIL_FOLDERS_LIST_VIEW_NUM_SIGNALS] = {0};

struct _MailFoldersListView {
	GtkGrid parent_instance;
	MailFoldersListViewPrivate * priv;
};

struct _MailFoldersListViewClass {
	GtkGridClass parent_class;
};

struct _MailFoldersListViewPrivate {
	HdyHeaderBar* _header_bar;
	GraniteWidgetsSourceList* source_list;
	MailSessionSourceItem* session_source_item;
};

struct _Block27Data {
	int _ref_count_;
	MailFoldersListView* self;
	MailAccountSourceItem* account_item;
	MailBackendAccount* account;
};

struct _MailFolderSourceItem {
	GraniteWidgetsSourceListExpandableItem parent_instance;
	MailFolderSourceItemPrivate * priv;
	gchar* full_name;
};

struct _MailFolderSourceItemClass {
	GraniteWidgetsSourceListExpandableItemClass parent_class;
};

static gint MailFoldersListView_private_offset;
static gpointer mail_folders_list_view_parent_class = NULL;
static GSettings* mail_folders_list_view_settings;
static GSettings* mail_folders_list_view_settings = NULL;

VALA_EXTERN GType mail_folders_list_view_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailFoldersListView, g_object_unref)
VALA_EXTERN GType mail_session_source_item_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailSessionSourceItem, g_object_unref)
VALA_EXTERN GType mail_backend_account_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailBackendAccount, g_object_unref)
static void mail_folders_list_view_add_account (MailFoldersListView* self,
                                         MailBackendAccount* account);
VALA_EXTERN GType mail_account_source_item_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailAccountSourceItem, g_object_unref)
static Block27Data* block27_data_ref (Block27Data* _data27_);
static void block27_data_unref (void * _userdata_);
VALA_EXTERN MailAccountSourceItem* mail_account_source_item_new (MailBackendAccount* account);
VALA_EXTERN MailAccountSourceItem* mail_account_source_item_construct (GType object_type,
                                                           MailBackendAccount* account);
VALA_EXTERN void mail_account_source_item_load (MailAccountSourceItem* self,
                                    GAsyncReadyCallback _callback_,
                                    gpointer _user_data_);
VALA_EXTERN void mail_account_source_item_load_finish (MailAccountSourceItem* self,
                                           GAsyncResult* _res_);
static void __lambda19_ (Block27Data* _data27_,
                  GObject* obj,
                  GAsyncResult* res);
VALA_EXTERN CamelService* mail_backend_account_get_service (MailBackendAccount* self);
static gboolean mail_folders_list_view_select_saved_folder (MailFoldersListView* self,
                                                     GraniteWidgetsSourceListExpandableItem* item,
                                                     const gchar* selected_folder_name);
static void ___lambda19__gasync_ready_callback (GObject* source_object,
                                         GAsyncResult* res,
                                         gpointer self);
VALA_EXTERN GType mail_folder_source_item_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailFolderSourceItem, g_object_unref)
VALA_EXTERN MailBackendAccount* mail_folder_source_item_get_account (MailFolderSourceItem* self);
VALA_EXTERN GType mail_grouped_folder_source_item_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailGroupedFolderSourceItem, g_object_unref)
VALA_EXTERN GeeMap* mail_grouped_folder_source_item_get_folder_full_name_per_account (MailGroupedFolderSourceItem* self);
VALA_EXTERN MailFoldersListView* mail_folders_list_view_new (void);
VALA_EXTERN MailFoldersListView* mail_folders_list_view_construct (GType object_type);
VALA_EXTERN HdyHeaderBar* mail_folders_list_view_get_header_bar (MailFoldersListView* self);
static void mail_folders_list_view_set_header_bar (MailFoldersListView* self,
                                            HdyHeaderBar* value);
static GObject * mail_folders_list_view_constructor (GType type,
                                              guint n_construct_properties,
                                              GObjectConstructParam * construct_properties);
VALA_EXTERN GType mail_backend_session_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (MailBackendSession, g_object_unref)
VALA_EXTERN MailBackendSession* mail_backend_session_get_default (void);
VALA_EXTERN MailSessionSourceItem* mail_session_source_item_new (MailBackendSession* session);
VALA_EXTERN MailSessionSourceItem* mail_session_source_item_construct (GType object_type,
                                                           MailBackendSession* session);
VALA_EXTERN GeeLinkedList* mail_backend_session_get_accounts (MailBackendSession* self);
static gboolean _mail_folders_list_view___lambda20_ (MailFoldersListView* self,
                                              MailBackendAccount* account);
static gboolean __mail_folders_list_view___lambda20__gee_forall_func (gpointer g,
                                                               gpointer self);
static void _mail_folders_list_view_add_account_mail_backend_session_account_added (MailBackendSession* _sender,
                                                                             MailBackendAccount* account,
                                                                             gpointer self);
static void _mail_folders_list_view___lambda21_ (MailFoldersListView* self,
                                          GraniteWidgetsSourceListItem* item);
static void __mail_folders_list_view___lambda21__granite_widgets_source_list_item_selected (GraniteWidgetsSourceList* _sender,
                                                                                     GraniteWidgetsSourceListItem* item,
                                                                                     gpointer self);
static void mail_folders_list_view_finalize (GObject * obj);
static GType mail_folders_list_view_get_type_once (void);
static void _vala_mail_folders_list_view_get_property (GObject * object,
                                                guint property_id,
                                                GValue * value,
                                                GParamSpec * pspec);
static void _vala_mail_folders_list_view_set_property (GObject * object,
                                                guint property_id,
                                                const GValue * value,
                                                GParamSpec * pspec);
static void _vala_array_destroy (gpointer array,
                          gssize array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gssize array_length,
                       GDestroyNotify destroy_func);
static gssize _vala_array_length (gpointer array);

static inline gpointer
mail_folders_list_view_get_instance_private (MailFoldersListView* self)
{
	return G_STRUCT_MEMBER_P (self, MailFoldersListView_private_offset);
}

static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}

static Block27Data*
block27_data_ref (Block27Data* _data27_)
{
	g_atomic_int_inc (&_data27_->_ref_count_);
	return _data27_;
}

static void
block27_data_unref (void * _userdata_)
{
	Block27Data* _data27_;
	_data27_ = (Block27Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data27_->_ref_count_)) {
		MailFoldersListView* self;
		self = _data27_->self;
		_g_object_unref0 (_data27_->account_item);
		_g_object_unref0 (_data27_->account);
		_g_object_unref0 (self);
		g_slice_free (Block27Data, _data27_);
	}
}

static void
__lambda19_ (Block27Data* _data27_,
             GObject* obj,
             GAsyncResult* res)
{
	MailFoldersListView* self;
	gchar* selected_folder_uid = NULL;
	gchar* selected_folder_name = NULL;
	GSettings* _tmp0_;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	CamelService* _tmp3_;
	CamelService* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	const gchar* _tmp7_;
	self = _data27_->self;
	g_return_if_fail (res != NULL);
	mail_account_source_item_load_finish (_data27_->account_item, res);
	_tmp0_ = mail_folders_list_view_settings;
	g_settings_get (_tmp0_, "selected-folder", "(ss)", &_tmp1_, &_tmp2_);
	_g_free0 (selected_folder_uid);
	selected_folder_uid = _tmp1_;
	_g_free0 (selected_folder_name);
	selected_folder_name = _tmp2_;
	_tmp3_ = mail_backend_account_get_service (_data27_->account);
	_tmp4_ = _tmp3_;
	_tmp5_ = camel_service_get_uid (_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = selected_folder_uid;
	if (g_strcmp0 (_tmp6_, _tmp7_) == 0) {
		const gchar* _tmp8_;
		_tmp8_ = selected_folder_name;
		mail_folders_list_view_select_saved_folder (self, (GraniteWidgetsSourceListExpandableItem*) _data27_->account_item, _tmp8_);
	} else {
		const gchar* _tmp9_;
		_tmp9_ = selected_folder_uid;
		if (g_strcmp0 (_tmp9_, "GROUPED") == 0) {
			MailSessionSourceItem* _tmp10_;
			const gchar* _tmp11_;
			_tmp10_ = self->priv->session_source_item;
			_tmp11_ = selected_folder_name;
			mail_folders_list_view_select_saved_folder (self, (GraniteWidgetsSourceListExpandableItem*) _tmp10_, _tmp11_);
		}
	}
	_g_free0 (selected_folder_name);
	_g_free0 (selected_folder_uid);
}

static void
___lambda19__gasync_ready_callback (GObject* source_object,
                                    GAsyncResult* res,
                                    gpointer self)
{
	__lambda19_ (self, source_object, res);
	block27_data_unref (self);
}

static void
mail_folders_list_view_add_account (MailFoldersListView* self,
                                    MailBackendAccount* account)
{
	Block27Data* _data27_;
	MailBackendAccount* _tmp0_;
	MailAccountSourceItem* _tmp1_;
	GraniteWidgetsSourceList* _tmp2_;
	GraniteWidgetsSourceListExpandableItem* _tmp3_;
	GraniteWidgetsSourceListExpandableItem* _tmp4_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (account != NULL);
	_data27_ = g_slice_new0 (Block27Data);
	_data27_->_ref_count_ = 1;
	_data27_->self = g_object_ref (self);
	_tmp0_ = _g_object_ref0 (account);
	_g_object_unref0 (_data27_->account);
	_data27_->account = _tmp0_;
	_tmp1_ = mail_account_source_item_new (_data27_->account);
	_data27_->account_item = _tmp1_;
	_tmp2_ = self->priv->source_list;
	_tmp3_ = granite_widgets_source_list_get_root (_tmp2_);
	_tmp4_ = _tmp3_;
	granite_widgets_source_list_expandable_item_add (_tmp4_, (GraniteWidgetsSourceListItem*) _data27_->account_item);
	mail_account_source_item_load (_data27_->account_item, ___lambda19__gasync_ready_callback, block27_data_ref (_data27_));
	block27_data_unref (_data27_);
	_data27_ = NULL;
}

static gboolean
mail_folders_list_view_select_saved_folder (MailFoldersListView* self,
                                            GraniteWidgetsSourceListExpandableItem* item,
                                            const gchar* selected_folder_name)
{
	gboolean result;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (item != NULL, FALSE);
	g_return_val_if_fail (selected_folder_name != NULL, FALSE);
	{
		GeeIterator* _child_it = NULL;
		GeeCollection* _tmp0_;
		GeeCollection* _tmp1_;
		GeeCollection* _tmp2_;
		GeeIterator* _tmp3_;
		GeeIterator* _tmp4_;
		_tmp0_ = granite_widgets_source_list_expandable_item_get_children (item);
		_tmp1_ = _tmp0_;
		_tmp2_ = _tmp1_;
		_tmp3_ = gee_iterable_iterator ((GeeIterable*) _tmp2_);
		_tmp4_ = _tmp3_;
		_g_object_unref0 (_tmp2_);
		_child_it = _tmp4_;
		while (TRUE) {
			GeeIterator* _tmp5_;
			GraniteWidgetsSourceListItem* child = NULL;
			GeeIterator* _tmp6_;
			gpointer _tmp7_;
			GraniteWidgetsSourceListItem* _tmp8_;
			_tmp5_ = _child_it;
			if (!gee_iterator_next (_tmp5_)) {
				break;
			}
			_tmp6_ = _child_it;
			_tmp7_ = gee_iterator_get (_tmp6_);
			child = (GraniteWidgetsSourceListItem*) _tmp7_;
			_tmp8_ = child;
			if (MAIL_IS_FOLDER_SOURCE_ITEM (_tmp8_)) {
				GraniteWidgetsSourceListItem* _tmp9_;
				MailFolderSourceItem* folder_item = NULL;
				GraniteWidgetsSourceListItem* _tmp10_;
				MailFolderSourceItem* _tmp11_;
				const gchar* _tmp12_;
				_tmp9_ = child;
				if (mail_folders_list_view_select_saved_folder (self, G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, GRANITE_WIDGETS_SOURCE_LIST_TYPE_EXPANDABLE_ITEM, GraniteWidgetsSourceListExpandableItem), selected_folder_name)) {
					result = TRUE;
					_g_object_unref0 (child);
					_g_object_unref0 (_child_it);
					return result;
				}
				_tmp10_ = child;
				folder_item = G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, MAIL_TYPE_FOLDER_SOURCE_ITEM, MailFolderSourceItem);
				_tmp11_ = folder_item;
				_tmp12_ = _tmp11_->full_name;
				if (g_strcmp0 (_tmp12_, selected_folder_name) == 0) {
					GraniteWidgetsSourceList* _tmp13_;
					GraniteWidgetsSourceListItem* _tmp14_;
					GeeHashMap* folder_name_per_account = NULL;
					GeeHashMap* _tmp15_;
					GeeHashMap* _tmp16_;
					MailFolderSourceItem* _tmp17_;
					MailBackendAccount* _tmp18_;
					MailBackendAccount* _tmp19_;
					MailFolderSourceItem* _tmp20_;
					const gchar* _tmp21_;
					GeeHashMap* _tmp22_;
					GeeMap* _tmp23_;
					GeeMap* _tmp24_;
					GeeMap* _tmp25_;
					_tmp13_ = self->priv->source_list;
					_tmp14_ = child;
					granite_widgets_source_list_set_selected (_tmp13_, _tmp14_);
					_tmp15_ = gee_hash_map_new (MAIL_BACKEND_TYPE_ACCOUNT, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
					folder_name_per_account = _tmp15_;
					_tmp16_ = folder_name_per_account;
					_tmp17_ = folder_item;
					_tmp18_ = mail_folder_source_item_get_account (_tmp17_);
					_tmp19_ = _tmp18_;
					_tmp20_ = folder_item;
					_tmp21_ = _tmp20_->full_name;
					gee_abstract_map_set ((GeeAbstractMap*) _tmp16_, _tmp19_, _tmp21_);
					_tmp22_ = folder_name_per_account;
					_tmp23_ = gee_abstract_map_get_read_only_view ((GeeAbstractMap*) _tmp22_);
					_tmp24_ = _tmp23_;
					_tmp25_ = _tmp24_;
					g_signal_emit (self, mail_folders_list_view_signals[MAIL_FOLDERS_LIST_VIEW_FOLDER_SELECTED_SIGNAL], 0, _tmp25_);
					_g_object_unref0 (_tmp25_);
					result = TRUE;
					_g_object_unref0 (folder_name_per_account);
					_g_object_unref0 (child);
					_g_object_unref0 (_child_it);
					return result;
				}
			} else {
				GraniteWidgetsSourceListItem* _tmp26_;
				_tmp26_ = child;
				if (MAIL_IS_GROUPED_FOLDER_SOURCE_ITEM (_tmp26_)) {
					MailGroupedFolderSourceItem* grouped_folder_item = NULL;
					GraniteWidgetsSourceListItem* _tmp27_;
					MailGroupedFolderSourceItem* _tmp28_;
					const gchar* _tmp29_;
					const gchar* _tmp30_;
					_tmp27_ = child;
					grouped_folder_item = G_TYPE_CHECK_INSTANCE_CAST (_tmp27_, MAIL_TYPE_GROUPED_FOLDER_SOURCE_ITEM, MailGroupedFolderSourceItem);
					_tmp28_ = grouped_folder_item;
					_tmp29_ = granite_widgets_source_list_item_get_name ((GraniteWidgetsSourceListItem*) _tmp28_);
					_tmp30_ = _tmp29_;
					if (g_strcmp0 (_tmp30_, selected_folder_name) == 0) {
						GraniteWidgetsSourceList* _tmp31_;
						GraniteWidgetsSourceListItem* _tmp32_;
						MailGroupedFolderSourceItem* _tmp33_;
						GeeMap* _tmp34_;
						GeeMap* _tmp35_;
						_tmp31_ = self->priv->source_list;
						_tmp32_ = child;
						granite_widgets_source_list_set_selected (_tmp31_, _tmp32_);
						_tmp33_ = grouped_folder_item;
						_tmp34_ = mail_grouped_folder_source_item_get_folder_full_name_per_account (_tmp33_);
						_tmp35_ = _tmp34_;
						g_signal_emit (self, mail_folders_list_view_signals[MAIL_FOLDERS_LIST_VIEW_FOLDER_SELECTED_SIGNAL], 0, _tmp35_);
						_g_object_unref0 (_tmp35_);
						result = TRUE;
						_g_object_unref0 (child);
						_g_object_unref0 (_child_it);
						return result;
					}
				}
			}
			_g_object_unref0 (child);
		}
		_g_object_unref0 (_child_it);
	}
	result = FALSE;
	return result;
}

MailFoldersListView*
mail_folders_list_view_construct (GType object_type)
{
	MailFoldersListView * self = NULL;
	self = (MailFoldersListView*) g_object_new (object_type, NULL);
	return self;
}

MailFoldersListView*
mail_folders_list_view_new (void)
{
	return mail_folders_list_view_construct (MAIL_TYPE_FOLDERS_LIST_VIEW);
}

HdyHeaderBar*
mail_folders_list_view_get_header_bar (MailFoldersListView* self)
{
	HdyHeaderBar* result;
	HdyHeaderBar* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_header_bar;
	result = _tmp0_;
	return result;
}

static void
mail_folders_list_view_set_header_bar (MailFoldersListView* self,
                                       HdyHeaderBar* value)
{
	HdyHeaderBar* old_value;
	g_return_if_fail (self != NULL);
	old_value = mail_folders_list_view_get_header_bar (self);
	if (old_value != value) {
		HdyHeaderBar* _tmp0_;
		_tmp0_ = _g_object_ref0 (value);
		_g_object_unref0 (self->priv->_header_bar);
		self->priv->_header_bar = _tmp0_;
		g_object_notify_by_pspec ((GObject *) self, mail_folders_list_view_properties[MAIL_FOLDERS_LIST_VIEW_HEADER_BAR_PROPERTY]);
	}
}

static gboolean
_mail_folders_list_view___lambda20_ (MailFoldersListView* self,
                                     MailBackendAccount* account)
{
	gboolean result;
	g_return_val_if_fail (account != NULL, FALSE);
	mail_folders_list_view_add_account (self, account);
	result = TRUE;
	_g_object_unref0 (account);
	return result;
}

static gboolean
__mail_folders_list_view___lambda20__gee_forall_func (gpointer g,
                                                      gpointer self)
{
	gboolean result;
	result = _mail_folders_list_view___lambda20_ ((MailFoldersListView*) self, (MailBackendAccount*) g);
	return result;
}

static void
_mail_folders_list_view_add_account_mail_backend_session_account_added (MailBackendSession* _sender,
                                                                        MailBackendAccount* account,
                                                                        gpointer self)
{
	mail_folders_list_view_add_account ((MailFoldersListView*) self, account);
}

static void
_mail_folders_list_view___lambda21_ (MailFoldersListView* self,
                                     GraniteWidgetsSourceListItem* item)
{
	if (item == NULL) {
		return;
	}
	if (MAIL_IS_FOLDER_SOURCE_ITEM (item)) {
		MailFolderSourceItem* folder_item = NULL;
		GeeHashMap* folder_name_per_account = NULL;
		GeeHashMap* _tmp0_;
		GeeHashMap* _tmp1_;
		MailFolderSourceItem* _tmp2_;
		MailBackendAccount* _tmp3_;
		MailBackendAccount* _tmp4_;
		MailFolderSourceItem* _tmp5_;
		const gchar* _tmp6_;
		GeeHashMap* _tmp7_;
		GeeMap* _tmp8_;
		GeeMap* _tmp9_;
		GeeMap* _tmp10_;
		GSettings* _tmp11_;
		MailFolderSourceItem* _tmp12_;
		MailBackendAccount* _tmp13_;
		MailBackendAccount* _tmp14_;
		CamelService* _tmp15_;
		CamelService* _tmp16_;
		const gchar* _tmp17_;
		const gchar* _tmp18_;
		MailFolderSourceItem* _tmp19_;
		const gchar* _tmp20_;
		folder_item = G_TYPE_CHECK_INSTANCE_CAST (item, MAIL_TYPE_FOLDER_SOURCE_ITEM, MailFolderSourceItem);
		_tmp0_ = gee_hash_map_new (MAIL_BACKEND_TYPE_ACCOUNT, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
		folder_name_per_account = _tmp0_;
		_tmp1_ = folder_name_per_account;
		_tmp2_ = folder_item;
		_tmp3_ = mail_folder_source_item_get_account (_tmp2_);
		_tmp4_ = _tmp3_;
		_tmp5_ = folder_item;
		_tmp6_ = _tmp5_->full_name;
		gee_abstract_map_set ((GeeAbstractMap*) _tmp1_, _tmp4_, _tmp6_);
		_tmp7_ = folder_name_per_account;
		_tmp8_ = gee_abstract_map_get_read_only_view ((GeeAbstractMap*) _tmp7_);
		_tmp9_ = _tmp8_;
		_tmp10_ = _tmp9_;
		g_signal_emit (self, mail_folders_list_view_signals[MAIL_FOLDERS_LIST_VIEW_FOLDER_SELECTED_SIGNAL], 0, _tmp10_);
		_g_object_unref0 (_tmp10_);
		_tmp11_ = mail_folders_list_view_settings;
		_tmp12_ = folder_item;
		_tmp13_ = mail_folder_source_item_get_account (_tmp12_);
		_tmp14_ = _tmp13_;
		_tmp15_ = mail_backend_account_get_service (_tmp14_);
		_tmp16_ = _tmp15_;
		_tmp17_ = camel_service_get_uid (_tmp16_);
		_tmp18_ = _tmp17_;
		_tmp19_ = folder_item;
		_tmp20_ = _tmp19_->full_name;
		g_settings_set (_tmp11_, "selected-folder", "(ss)", _tmp18_, _tmp20_);
		_g_object_unref0 (folder_name_per_account);
	} else {
		if (MAIL_IS_GROUPED_FOLDER_SOURCE_ITEM (item)) {
			MailGroupedFolderSourceItem* grouped_folder_item = NULL;
			MailGroupedFolderSourceItem* _tmp21_;
			GeeMap* _tmp22_;
			GeeMap* _tmp23_;
			GSettings* _tmp24_;
			MailGroupedFolderSourceItem* _tmp25_;
			const gchar* _tmp26_;
			const gchar* _tmp27_;
			grouped_folder_item = G_TYPE_CHECK_INSTANCE_CAST (item, MAIL_TYPE_GROUPED_FOLDER_SOURCE_ITEM, MailGroupedFolderSourceItem);
			_tmp21_ = grouped_folder_item;
			_tmp22_ = mail_grouped_folder_source_item_get_folder_full_name_per_account (_tmp21_);
			_tmp23_ = _tmp22_;
			g_signal_emit (self, mail_folders_list_view_signals[MAIL_FOLDERS_LIST_VIEW_FOLDER_SELECTED_SIGNAL], 0, _tmp23_);
			_g_object_unref0 (_tmp23_);
			_tmp24_ = mail_folders_list_view_settings;
			_tmp25_ = grouped_folder_item;
			_tmp26_ = granite_widgets_source_list_item_get_name ((GraniteWidgetsSourceListItem*) _tmp25_);
			_tmp27_ = _tmp26_;
			g_settings_set (_tmp24_, "selected-folder", "(ss)", "GROUPED", _tmp27_);
		}
	}
}

static void
__mail_folders_list_view___lambda21__granite_widgets_source_list_item_selected (GraniteWidgetsSourceList* _sender,
                                                                                GraniteWidgetsSourceListItem* item,
                                                                                gpointer self)
{
	_mail_folders_list_view___lambda21_ ((MailFoldersListView*) self, item);
}

static GObject *
mail_folders_list_view_constructor (GType type,
                                    guint n_construct_properties,
                                    GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	MailFoldersListView * self;
	GraniteWidgetsSourceListExpandableItem* _tmp0_;
	GraniteWidgetsSourceListExpandableItem* _tmp1_;
	GraniteWidgetsSourceList* _tmp2_;
	GtkApplication* application_instance = NULL;
	GApplication* _tmp3_;
	GtkApplication* _tmp4_;
	GtkButton* compose_button = NULL;
	gchar* _tmp5_;
	GtkButton* _tmp6_ = NULL;
	GtkButton* _tmp7_;
	GtkApplication* _tmp8_;
	GtkButton* _tmp9_;
	const gchar* _tmp10_;
	const gchar* _tmp11_;
	gchar** _tmp12_;
	gchar** _tmp13_;
	gchar** _tmp14_;
	gint _tmp14__length1;
	gchar* _tmp15_;
	gchar* _tmp16_;
	HdyHeaderBar* _tmp17_ = NULL;
	HdyHeaderBar* _tmp18_;
	HdyHeaderBar* _tmp19_;
	GtkButton* _tmp20_;
	HdyHeaderBar* _tmp21_;
	GtkStyleContext* _tmp22_;
	GtkScrolledWindow* scrolled_window = NULL;
	GtkScrolledWindow* _tmp23_;
	GtkScrolledWindow* _tmp24_;
	GraniteWidgetsSourceList* _tmp25_;
	GtkStyleContext* _tmp26_;
	HdyHeaderBar* _tmp27_;
	GtkScrolledWindow* _tmp28_;
	MailBackendSession* session = NULL;
	MailBackendSession* _tmp29_;
	MailBackendSession* _tmp30_;
	MailBackendSession* _tmp31_;
	MailSessionSourceItem* _tmp32_;
	GraniteWidgetsSourceList* _tmp33_;
	GraniteWidgetsSourceListExpandableItem* _tmp34_;
	GraniteWidgetsSourceListExpandableItem* _tmp35_;
	MailSessionSourceItem* _tmp36_;
	MailBackendSession* _tmp37_;
	GeeLinkedList* _tmp38_;
	GeeLinkedList* _tmp39_;
	MailBackendSession* _tmp40_;
	GraniteWidgetsSourceList* _tmp41_;
	parent_class = G_OBJECT_CLASS (mail_folders_list_view_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListView);
	_tmp0_ = granite_widgets_source_list_expandable_item_new ("");
	_tmp1_ = _tmp0_;
	_tmp2_ = granite_widgets_source_list_new (_tmp1_);
	g_object_ref_sink (_tmp2_);
	_g_object_unref0 (self->priv->source_list);
	self->priv->source_list = _tmp2_;
	_g_object_unref0 (_tmp1_);
	_tmp3_ = g_application_get_default ();
	_tmp4_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, gtk_application_get_type (), GtkApplication));
	application_instance = _tmp4_;
	_tmp5_ = g_strdup (MAIL_MAIN_WINDOW_ACTION_PREFIX MAIL_MAIN_WINDOW_ACTION_COMPOSE_MESSAGE);
	_tmp6_ = (GtkButton*) gtk_button_new_from_icon_name ("mail-message-new", (GtkIconSize) GTK_ICON_SIZE_LARGE_TOOLBAR);
	gtk_actionable_set_action_name ((GtkActionable*) _tmp6_, _tmp5_);
	_g_free0 (_tmp5_);
	gtk_widget_set_halign ((GtkWidget*) _tmp6_, GTK_ALIGN_START);
	g_object_ref_sink (_tmp6_);
	compose_button = _tmp6_;
	_tmp7_ = compose_button;
	_tmp8_ = application_instance;
	_tmp9_ = compose_button;
	_tmp10_ = gtk_actionable_get_action_name ((GtkActionable*) _tmp9_);
	_tmp11_ = _tmp10_;
	_tmp13_ = _tmp12_ = gtk_application_get_accels_for_action (_tmp8_, _tmp11_);
	_tmp14_ = _tmp13_;
	_tmp14__length1 = _vala_array_length (_tmp12_);
	_tmp15_ = granite_markup_accel_tooltip (_tmp14_, (gint) _vala_array_length (_tmp12_), _ ("Compose new message"));
	_tmp16_ = _tmp15_;
	gtk_widget_set_tooltip_markup ((GtkWidget*) _tmp7_, _tmp16_);
	_g_free0 (_tmp16_);
	_tmp14_ = (_vala_array_free (_tmp14_, _tmp14__length1, (GDestroyNotify) g_free), NULL);
	_tmp17_ = (HdyHeaderBar*) hdy_header_bar_new ();
	hdy_header_bar_set_show_close_button (_tmp17_, TRUE);
	g_object_ref_sink (_tmp17_);
	_tmp18_ = _tmp17_;
	mail_folders_list_view_set_header_bar (self, _tmp18_);
	_g_object_unref0 (_tmp18_);
	_tmp19_ = self->priv->_header_bar;
	_tmp20_ = compose_button;
	hdy_header_bar_pack_end (_tmp19_, (GtkWidget*) _tmp20_);
	_tmp21_ = self->priv->_header_bar;
	_tmp22_ = gtk_widget_get_style_context ((GtkWidget*) _tmp21_);
	gtk_style_context_add_class (_tmp22_, GTK_STYLE_CLASS_FLAT);
	_tmp23_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp23_);
	scrolled_window = _tmp23_;
	_tmp24_ = scrolled_window;
	_tmp25_ = self->priv->source_list;
	gtk_container_add ((GtkContainer*) _tmp24_, (GtkWidget*) _tmp25_);
	gtk_orientable_set_orientation ((GtkOrientable*) self, GTK_ORIENTATION_VERTICAL);
	g_object_set ((GtkWidget*) self, "width-request", 100, NULL);
	_tmp26_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_add_class (_tmp26_, GTK_STYLE_CLASS_SIDEBAR);
	_tmp27_ = self->priv->_header_bar;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp27_);
	_tmp28_ = scrolled_window;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp28_);
	_tmp29_ = mail_backend_session_get_default ();
	_tmp30_ = _g_object_ref0 (_tmp29_);
	session = _tmp30_;
	_tmp31_ = session;
	_tmp32_ = mail_session_source_item_new (_tmp31_);
	_g_object_unref0 (self->priv->session_source_item);
	self->priv->session_source_item = _tmp32_;
	_tmp33_ = self->priv->source_list;
	_tmp34_ = granite_widgets_source_list_get_root (_tmp33_);
	_tmp35_ = _tmp34_;
	_tmp36_ = self->priv->session_source_item;
	granite_widgets_source_list_expandable_item_add (_tmp35_, (GraniteWidgetsSourceListItem*) _tmp36_);
	_tmp37_ = session;
	_tmp38_ = mail_backend_session_get_accounts (_tmp37_);
	_tmp39_ = _tmp38_;
	gee_abstract_collection_foreach ((GeeAbstractCollection*) _tmp39_, __mail_folders_list_view___lambda20__gee_forall_func, self);
	_g_object_unref0 (_tmp39_);
	_tmp40_ = session;
	g_signal_connect_object (_tmp40_, "account-added", (GCallback) _mail_folders_list_view_add_account_mail_backend_session_account_added, self, 0);
	_tmp41_ = self->priv->source_list;
	g_signal_connect_object (_tmp41_, "item-selected", (GCallback) __mail_folders_list_view___lambda21__granite_widgets_source_list_item_selected, self, 0);
	_g_object_unref0 (session);
	_g_object_unref0 (scrolled_window);
	_g_object_unref0 (compose_button);
	_g_object_unref0 (application_instance);
	return obj;
}

static void
mail_folders_list_view_class_init (MailFoldersListViewClass * klass,
                                   gpointer klass_data)
{
	GSettings* _tmp0_;
	mail_folders_list_view_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &MailFoldersListView_private_offset);
	G_OBJECT_CLASS (klass)->get_property = _vala_mail_folders_list_view_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_mail_folders_list_view_set_property;
	G_OBJECT_CLASS (klass)->constructor = mail_folders_list_view_constructor;
	G_OBJECT_CLASS (klass)->finalize = mail_folders_list_view_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), MAIL_FOLDERS_LIST_VIEW_HEADER_BAR_PROPERTY, mail_folders_list_view_properties[MAIL_FOLDERS_LIST_VIEW_HEADER_BAR_PROPERTY] = g_param_spec_object ("header-bar", "header-bar", "header-bar", hdy_header_bar_get_type (), G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
	mail_folders_list_view_signals[MAIL_FOLDERS_LIST_VIEW_FOLDER_SELECTED_SIGNAL] = g_signal_new ("folder-selected", MAIL_TYPE_FOLDERS_LIST_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__OBJECT, G_TYPE_NONE, 1, GEE_TYPE_MAP);
	_tmp0_ = g_settings_new ("io.elementary.mail");
	_g_object_unref0 (mail_folders_list_view_settings);
	mail_folders_list_view_settings = _tmp0_;
}

static void
mail_folders_list_view_instance_init (MailFoldersListView * self,
                                      gpointer klass)
{
	self->priv = mail_folders_list_view_get_instance_private (self);
}

static void
mail_folders_list_view_finalize (GObject * obj)
{
	MailFoldersListView * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListView);
	_g_object_unref0 (self->priv->_header_bar);
	_g_object_unref0 (self->priv->source_list);
	_g_object_unref0 (self->priv->session_source_item);
	G_OBJECT_CLASS (mail_folders_list_view_parent_class)->finalize (obj);
}

static GType
mail_folders_list_view_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (MailFoldersListViewClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) mail_folders_list_view_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MailFoldersListView), 0, (GInstanceInitFunc) mail_folders_list_view_instance_init, NULL };
	GType mail_folders_list_view_type_id;
	mail_folders_list_view_type_id = g_type_register_static (gtk_grid_get_type (), "MailFoldersListView", &g_define_type_info, 0);
	MailFoldersListView_private_offset = g_type_add_instance_private (mail_folders_list_view_type_id, sizeof (MailFoldersListViewPrivate));
	return mail_folders_list_view_type_id;
}

GType
mail_folders_list_view_get_type (void)
{
	static volatile gsize mail_folders_list_view_type_id__once = 0;
	if (g_once_init_enter (&mail_folders_list_view_type_id__once)) {
		GType mail_folders_list_view_type_id;
		mail_folders_list_view_type_id = mail_folders_list_view_get_type_once ();
		g_once_init_leave (&mail_folders_list_view_type_id__once, mail_folders_list_view_type_id);
	}
	return mail_folders_list_view_type_id__once;
}

static void
_vala_mail_folders_list_view_get_property (GObject * object,
                                           guint property_id,
                                           GValue * value,
                                           GParamSpec * pspec)
{
	MailFoldersListView * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListView);
	switch (property_id) {
		case MAIL_FOLDERS_LIST_VIEW_HEADER_BAR_PROPERTY:
		g_value_set_object (value, mail_folders_list_view_get_header_bar (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}

static void
_vala_mail_folders_list_view_set_property (GObject * object,
                                           guint property_id,
                                           const GValue * value,
                                           GParamSpec * pspec)
{
	MailFoldersListView * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, MAIL_TYPE_FOLDERS_LIST_VIEW, MailFoldersListView);
	switch (property_id) {
		case MAIL_FOLDERS_LIST_VIEW_HEADER_BAR_PROPERTY:
		mail_folders_list_view_set_header_bar (self, g_value_get_object (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}

static void
_vala_array_destroy (gpointer array,
                     gssize array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gssize i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gssize array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

static gssize
_vala_array_length (gpointer array)
{
	gssize length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}

